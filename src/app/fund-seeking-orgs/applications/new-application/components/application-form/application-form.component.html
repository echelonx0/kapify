<div class="space-y-8">
  <div class="flex items-center space-x-3 mb-6">
    <div
      class="w-10 h-10 bg-gradient-to-br from-slate-500 to-slate-600 rounded-lg flex items-center justify-center shadow-lg"
    >
      <lucide-icon [img]="FileTextIcon" [size]="20" class="text-white" />
    </div>
    <div>
      <h3 class="text-lg font-semibold text-slate-900">Application Details</h3>
      <p class="text-sm text-slate-600">
        Provide information specific to this opportunity
      </p>
    </div>
  </div>

  <!-- Funding Type Selection -->
  <ui-select
    [label]="'Funding Type'"
    [placeholder]="'Select the type of funding you need'"
    [required]="true"
    [options]="fundingTypeOptions()"
    [(ngModel)]="fundingTypeModel"
    [error]="getFundingTypeError() || undefined"
    [hint]="'Choose the funding structure that best fits your needs'"
    (valueChange)="onFundingTypeChange($event)"
  ></ui-select>
  <!-- Requested Amount -->
  <div class="group">
    <label
      class="block text-sm font-semibold text-slate-900 mb-3 group-hover:text-slate-700 transition-colors"
    >
      Requested Amount <span class="text-red-500">*</span>
    </label>
    <div class="relative">
      <input
        type="text"
        inputmode="numeric"
        [value]="getFormattedAmount()"
        (input)="onAmountInput($event)"
        (blur)="validateAmount()"
        placeholder="0"
        class="block w-full px-4 py-3 text-lg border-2 border-slate-200 rounded-lg shadow-sm placeholder-slate-400 focus:outline-none focus:border-slate-900 focus:ring-2 focus:ring-slate-100 transition-all hover:border-slate-300 font-semibold bg-white text-right tracking-tight"
      />
    </div>
    @if (getAmountValidationMessage()) {
    <div
      class="mt-2.5 flex items-center space-x-1.5 text-sm text-red-600 font-medium"
    >
      <div class="w-1.5 h-1.5 rounded-full bg-red-600"></div>
      <span>{{ getAmountValidationMessage() }}</span>
    </div>
    } @else {
    <p class="mt-2.5 text-sm text-slate-600">
      Range: {{ formatCurrency(opportunity().minInvestment) }} â€“
      {{ formatCurrency(opportunity().maxInvestment) }}
    </p>
    }
  </div>

  <!-- Purpose Statement -->
  <ui-textarea
    [label]="'Use of Funds'"
    [placeholder]="
      'Explain why you need this funding. Be clear and compelling.'
    "
    [required]="true"
    [rows]="6"
    [value]="formData().purposeStatement"
    [error]="getPurposeError()"
    [hint]="
      'Describe your business objectives and why this funding is critical.'
    "
    [showCharCount]="true"
    (ngModelChange)="onPurposeStatementChange($event)"
    ngModel
  ></ui-textarea>

  <!-- Use of Funds -->
  <ui-textarea
    [label]="'Use of Funds'"
    [placeholder]="
      'Provide a detailed breakdown of how you will use the funding.'
    "
    [required]="true"
    [rows]="6"
    [value]="formData().useOfFunds"
    [error]="getUseOfFundsError()"
    [hint]="'Break down how funds will be allocated across key initiatives.'"
    [showCharCount]="true"
    (ngModelChange)="onUseOfFundsChange($event)"
    ngModel
  ></ui-textarea>

  <!-- Cover Statement Upload -->
  <div class="mt-6">
    <app-cover-statement-upload
      (fileSelected)="onCoverStatementUploaded($event)"
    >
    </app-cover-statement-upload>
  </div>

  <!-- Progress Indicator -->
  <div class="bg-slate-50 border border-slate-200 rounded-lg p-5">
    <div class="flex items-center justify-between text-sm text-slate-700 mb-3">
      <span class="font-semibold">Application Completion</span>
      <span class="font-semibold text-slate-900"
        >{{ completionPercentage() }}%</span
      >
    </div>
    <div class="w-full bg-slate-200 rounded-full h-2">
      <div
        class="bg-gradient-to-r from-emerald-400 to-emerald-600 h-2 rounded-full transition-all duration-500"
        [style.width.%]="completionPercentage()"
      ></div>
    </div>
    <div class="mt-3 flex items-center text-xs text-slate-600 font-medium">
      <div class="w-1.5 h-1.5 rounded-full bg-emerald-600 mr-2"></div>
      Complete all required fields
    </div>
  </div>
</div>
