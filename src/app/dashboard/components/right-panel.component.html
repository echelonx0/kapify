<div class="border-l border-gray-200 flex flex-col h-full bg-white">
  <!-- Panel Header -->
  <div class="flex-shrink-0 border-b border-gray-200 p-4">
    <div class="flex items-center justify-between">
      <h2 class="text-lg font-semibold text-gray-900">
        {{ currentConfig().title }}
      </h2>
      @if (currentConfig().showCloseButton) {
      <button
        (click)="closePanel()"
        class="p-1 hover:bg-gray-100 rounded-lg transition-colors"
        title="Back to Activity Inbox"
      >
        <lucide-icon [img]="ArrowLeftIcon" [size]="20" class="text-gray-500" />
      </button>
      }
    </div>
  </div>

  <!-- Panel Content -->
  <div class="flex-1" [class.overflow-y-auto]="currentConfig().scrollable">
    @switch (currentContent()) { @case ('activity-inbox') {
    <app-activity-inbox />
    } @case ('how-it-works') {
    <!-- Different content for SME vs FUNDER -->
    @if (userType === 'sme') {
    <div class="p-6 space-y-6">
      <div class="prose prose-sm max-w-none space-y-4">
        <div class="bg-slate-50 border-l-4 border-slate-400 p-4">
          <h4 class="text-sm font-medium text-slate-800">
            Step 1: Complete Your Business Profile
          </h4>
          <p class="mt-1 text-sm text-slate-700">
            Build a comprehensive business profile that highlights your
            strengths, products, and funding goals.
          </p>
        </div>

        <div class="bg-green-50 border-l-4 border-green-400 p-4">
          <h4 class="text-sm font-medium text-green-800">
            Step 2: Get Matched with Funders
          </h4>
          <p class="mt-1 text-sm text-green-700">
            Our AI system recommends suitable funding opportunities based on
            your business type, size, and goals.
          </p>
        </div>

        <div class="bg-teal-50 border-l-4 border-teal-400 p-4">
          <h4 class="text-sm font-medium text-teal-800">
            Step 3: Apply and Track Progress
          </h4>
          <p class="mt-1 text-sm text-teal-700">
            Submit applications easily and monitor your funding journey directly
            from your dashboard.
          </p>
        </div>

        <div class="bg-orange-50 border-l-4 border-orange-400 p-4">
          <h4 class="text-sm font-medium text-orange-800">
            Step 4: Secure Funding and Grow
          </h4>
          <p class="mt-1 text-sm text-orange-700">
            Once approved, receive funding and scale your operations confidently
            with ongoing support.
          </p>
        </div>
      </div>
    </div>
    } @else if (userType === 'funder') {
    <div class="p-6 space-y-6">
      <div class="prose prose-sm max-w-none space-y-4">
        <div class="bg-slate-50 border-l-4 border-slate-400 p-4">
          <h4 class="text-sm font-medium text-slate-800">
            Step 1: Set Your Investment Preferences
          </h4>
          <p class="mt-1 text-sm text-slate-700">
            Define the sectors, ticket sizes, and stages youâ€™re interested in
            funding.
          </p>
        </div>

        <div class="bg-green-50 border-l-4 border-green-400 p-4">
          <h4 class="text-sm font-medium text-green-800">
            Step 2: Discover Promising Businesses
          </h4>
          <p class="mt-1 text-sm text-green-700">
            Our AI-driven engine matches you with SMEs that fit your investment
            profile.
          </p>
        </div>

        <div class="bg-teal-50 border-l-4 border-teal-400 p-4">
          <h4 class="text-sm font-medium text-teal-800">
            Step 3: Engage and Evaluate
          </h4>
          <p class="mt-1 text-sm text-teal-700">
            Connect with business owners, review their profiles, and assess
            opportunities before funding.
          </p>
        </div>

        <div class="bg-orange-50 border-l-4 border-orange-400 p-4">
          <h4 class="text-sm font-medium text-orange-800">
            Step 4: Fund and Track Performance
          </h4>
          <p class="mt-1 text-sm text-orange-700">
            Complete investments securely and monitor performance through the
            Kapify dashboard.
          </p>
        </div>
      </div>
    </div>
    } } @case ('funding-types') { @if (userType === 'sme') {
    <div class="p-6 space-y-6">
      <h3 class="text-lg font-semibold text-gray-900 mb-4">
        Funding Types Available
      </h3>

      <div class="space-y-4">
        @for (fundingType of fundingTypes; track fundingType.id) {
        <div
          class="border border-gray-200 rounded-lg p-4 hover:border-gray-300 transition-colors"
        >
          <div class="flex items-start space-x-3">
            <div
              class="w-8 h-8 rounded-lg flex items-center justify-center flex-shrink-0"
              [class]="fundingType.iconBg"
            >
              <span class="text-xs font-bold" [class]="fundingType.iconColor">
                {{ fundingType.icon }}
              </span>
            </div>
            <div class="flex-1">
              <h4 class="font-medium text-gray-900">{{ fundingType.title }}</h4>
              <p class="text-sm text-gray-600 mt-1">
                {{ fundingType.description }}
              </p>
              <div
                class="mt-2 flex items-center space-x-4 text-xs text-gray-500"
              >
                <span>Range: {{ fundingType.range }}</span>
                <span>â€¢</span>
                <span>Term: {{ fundingType.term }}</span>
              </div>
            </div>
          </div>
        </div>
        }
      </div>
    </div>
    } @else if (userType === 'funder') {
    <div class="p-6 space-y-6">
      <h3 class="text-lg font-semibold text-gray-900 mb-4">
        Investment Opportunities
      </h3>
      <p class="text-sm text-gray-600">
        Discover high-potential SMEs actively seeking capital. Filter by
        industry, location, and stage to find your ideal match.
      </p>
    </div>
    } } @case ('tips') {
    <div class="p-6 space-y-6">
      <h3 class="text-lg font-semibold text-gray-900 mb-4">
        {{ userType === "sme" ? "Funding Tips" : "Investment Tips" }}
      </h3>

      <div class="mb-6 bg-slate-50 rounded-lg p-3 overflow-hidden w-full">
        <div class="whitespace-nowrap animate-scroll">
          {{
            userType === "sme"
              ? "Prepare your documents â€¢ Build strong relationships â€¢ Perfect your pitch"
              : "Diversify your portfolio â€¢ Conduct due diligence â€¢ Support sustainable growth"
          }}
        </div>
      </div>

      <div class="space-y-4">
        @for (tip of fundingTips; track tip.id) {
        <div class="bg-white border border-gray-200 rounded-lg p-4 w-full">
          <h4 class="font-medium text-gray-900 mb-2">{{ tip.title }}</h4>
          <p class="text-sm text-gray-600">{{ tip.content }}</p>
          @if (tip.action) {
          <button
            class="mt-2 text-xs text-slate-600 hover:text-slate-700 font-medium"
          >
            {{ tip.action }}
          </button>
          }
        </div>
        }
      </div>
    </div>
    } @case ('security') {
    <div class="p-6">
      <h3 class="text-lg font-semibold text-gray-900 mb-4">
        Security & Compliance
      </h3>

      <div class="space-y-6">
        <div class="bg-green-50 border border-green-200 rounded-lg p-4">
          <div class="flex items-center space-x-2 mb-2">
            <div
              class="w-5 h-5 bg-green-500 rounded-full flex items-center justify-center"
            >
              <span class="text-white text-xs">âœ“</span>
            </div>
            <span class="font-medium text-green-800">Bank-Level Security</span>
          </div>
          <p class="text-sm text-green-700">
            256-bit SSL encryption protects all data transmission.
          </p>
        </div>

        <div class="bg-slate-50 border border-slate-200 rounded-lg p-4">
          <div class="flex items-center space-x-2 mb-2">
            <div
              class="w-5 h-5 bg-slate-500 rounded-full flex items-center justify-center"
            >
              <span class="text-white text-xs">âœ“</span>
            </div>
            <span class="font-medium text-slate-800">POPIA Compliant</span>
          </div>
          <p class="text-sm text-slate-700">
            Full compliance with South African privacy regulations.
          </p>
        </div>

        <div class="bg-teal-50 border border-teal-200 rounded-lg p-4">
          <div class="flex items-center space-x-2 mb-2">
            <div
              class="w-5 h-5 bg-teal-500 rounded-full flex items-center justify-center"
            >
              <span class="text-white text-xs">âœ“</span>
            </div>
            <span class="font-medium text-teal-800">ISO 27001</span>
          </div>
          <p class="text-sm text-teal-700">
            International security management standards.
          </p>
        </div>

        <div class="mt-6 p-4 bg-yellow-50 border border-yellow-200 rounded-lg">
          <h4 class="font-medium text-yellow-800 mb-2">
            Data Protection Promise
          </h4>
          <p class="text-sm text-yellow-700">
            Your data is never shared without explicit permission. We use
            advanced encryption and access controls to ensure confidentiality.
          </p>
        </div>
      </div>
    </div>
    } @default {
    <div class="p-6 text-center text-gray-500">
      <div
        class="w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4"
      >
        <span class="text-2xl">ðŸ“‹</span>
      </div>
      <h3 class="font-medium text-gray-900 mb-2">Welcome to Kapify</h3>
      <p class="text-sm">
        {{
          userType === "sme"
            ? "Explore funding options tailored to your business."
            : "Find and fund high-potential SMEs confidently."
        }}
      </p>
    </div>
    } }
  </div>
</div>

<!-- Custom Styles -->
<style>
  @keyframes scroll {
    0% {
      transform: translateX(100%);
    }
    100% {
      transform: translateX(-100%);
    }
  }
  .animate-scroll {
    animation: scroll 20s linear infinite;
  }
</style>
