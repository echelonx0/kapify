 <header class="bg-white border-b border-gray-200 sticky top-0 z-40">
        <div class="max-w-7xl mx-auto px-6 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-4">
                    <button class="flex items-center space-x-2 text-gray-600 hover:text-gray-900 transition-colors">
                        <i data-lucide="arrow-left" class="w-4 h-4"></i>
                        <span class="font-medium">Back to Applications</span>
                    </button>
                    <div class="h-6 w-px bg-gray-300"></div>
                    <div>
                     
                        <div class="flex items-center space-x-4 mt-1">
                            <span class="status-badge status-submitted">Submitted</span>
                            <span class="text-sm text-gray-500">01 Sept 2025, 15:34</span>
                        </div>
                    </div>
                </div>
                
                <!-- AI-Powered Decision Actions -->
                <div class="flex items-center space-x-3">
                    <div class="flex items-center space-x-2 text-sm">
                        <div class="w-2 h-2 bg-green-500 rounded-full pulse-dot"></div>
                        <span class="text-gray-600">AI Analysis Enabled | Subscribe</span>
                    </div>
                    <button class="decision-button bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg font-medium flex items-center space-x-2">
                        <i data-lucide="check-circle" class="w-4 h-4"></i>
                        <span>Approve</span>
                    </button>
                    <button class="decision-button bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg font-medium flex items-center space-x-2">
                        <i data-lucide="x-circle" class="w-4 h-4"></i>
                        <span>Reject</span>
                    </button>
                </div>
            </div>
        </div>
    </header>

    <div class="max-w-7xl mx-auto px-6 py-6">
        <div class="grid grid-cols-12 gap-6">
            
            <!-- Main Content Area -->
            <div class="col-span-8 space-y-6">
                
                <!-- AI-Powered Executive Summary -->
                <div class="gradient-border">
                   
                  @if (application() && opportunity()) {
  <app-ai-executive-summary 
    [application]="application()!" 
    [opportunity]="opportunity()!">
  </app-ai-executive-summary>
}

@if (isLoading()) {
  <div class="gradient-border">
    <div class="gradient-content">
      <div class="flex items-center justify-center py-8">
        <lucide-icon [img]="Loader2Icon" [size]="24" class="animate-spin text-purple-600 mr-2"></lucide-icon>
        <span class="text-gray-600">Loading AI analysis...</span>
      </div>
    </div>
  </div>
}

@if (error()) {
  <div class="gradient-border">
    <div class="gradient-content">
      <div class="flex items-center justify-center py-8 text-red-600">
        <lucide-icon [img]="AlertCircleIcon" [size]="20" class="mr-2"></lucide-icon>
        <span>Unable to load AI analysis: {{ error() }}</span>
      </div>
    </div>
  </div>
}
                </div>

                <!-- Enhanced Application Details -->  
<div class="card">
  <div class="p-6">
    <div class="flex items-center justify-between mb-6">
      <h2 class="text-lg font-semibold text-gray-900">Application Details</h2>
      <button class="text-blue-600 hover:text-blue-800 text-sm font-medium">
        Generate Summary Report
      </button>
    </div>

    <div class="grid grid-cols-2 gap-8">
      <div class="space-y-6">
        <!-- Project Description -->
        <div>
          <h3 class="text-sm font-medium text-gray-700 mb-2">Project Description</h3>
          <p class="text-gray-900 leading-relaxed">
            {{ application()!.description || 'No description provided' }}
          </p>
        </div>

        <!-- Use of Funds - from form data -->
        @if (getUseOfFunds()) {
          <div>
            <h3 class="text-sm font-medium text-gray-700 mb-2">Use of Funds</h3>
            <div class="bg-gray-50 rounded-lg p-4">
              <p class="text-gray-900 leading-relaxed">{{ getUseOfFunds() }}</p>
            </div>
          </div>
        }

        <!-- Additional Form Data -->
        @if (hasFormData()) {
          <div>
            <h3 class="text-sm font-medium text-gray-700 mb-2">Additional Details</h3>
            <div class="space-y-3">
              @for (entry of getFormDataEntries(); track entry.key) {
                @if (entry.value && entry.value !== '' && entry.key !== 'requestedAmount' && entry.key !== 'useOfFunds') {
                  <div class="bg-gray-50 rounded-lg p-3">
                    <div class="flex justify-between items-start">
                      <span class="text-gray-600 text-sm font-medium">{{ formatFieldName(entry.key) }}</span>
                      <span class="text-gray-900 text-sm max-w-xs text-right">{{ entry.value }}</span>
                    </div>
                  </div>
                }
              }
            </div>
          </div>
        }

       
      </div>

      <div class="space-y-6">
        <!-- Key Metrics from Real Data -->
        <div class="bg-gray-50 rounded-lg p-4">
          <h3 class="font-medium text-gray-900 mb-3">Key Metrics</h3>
          <div class="space-y-3">
            @if (getRequestedAmount()) {
              <div class="flex justify-between">
                <span class="text-gray-600">Requested Amount</span>
                <span class="font-bold text-gray-900">{{ formatCurrency(getRequestedAmount()!) }}</span>
              </div>
            }
            
            @if (getTimeline()) {
              <div class="flex justify-between">
                <span class="text-gray-600">Project Timeline</span>
                <span class="font-medium text-gray-900">{{ getTimeline() }}</span>
              </div>
            }
            
            @if (opportunity()) {
              <div class="flex justify-between">
                <span class="text-gray-600">Funding Type</span>
                <span class="font-medium text-gray-900">{{ opportunity()!.fundingType }}</span>
              </div>
              
              <div class="flex justify-between">
                <span class="text-gray-600">Max Available</span>
                <span class="font-medium text-gray-900">{{ formatCurrency(opportunity()!.offerAmount) }}</span>
              </div>
              
              @if (opportunity()!.currency) {
                <div class="flex justify-between">
                  <span class="text-gray-600">Currency</span>
                  <span class="font-medium text-gray-900">{{ opportunity()!.currency }}</span>
                </div>
              }
            }
            
            @if (application()!.applicant?.industry) {
              <div class="flex justify-between">
                <span class="text-gray-600">Industry</span>
                <span class="font-medium text-gray-900">{{ application()!.applicant!.industry }}</span>
              </div>
            }
            
      
          </div>
        </div>

        <!-- Application Timeline -->
        <div class="bg-gray-50 rounded-lg p-4">
          <h3 class="font-medium text-gray-900 mb-3">Timeline</h3>
          <div class="space-y-3">
            <div class="flex justify-between">
              <span class="text-gray-600">Created</span>
              <span class="font-medium text-gray-900 text-sm">{{ formatDate(application()!.createdAt) }}</span>
            </div>
            
            @if (application()!.submittedAt) {
              <div class="flex justify-between">
                <span class="text-gray-600">Submitted</span>
                <span class="font-medium text-gray-900 text-sm">{{ formatDate(application()!.submittedAt) }}</span>
              </div>
            }
            
            @if (application()!.reviewStartedAt) {
              <div class="flex justify-between">
                <span class="text-gray-600">Review Started</span>
                <span class="font-medium text-gray-900 text-sm">{{ formatDate(application()!.reviewStartedAt) }}</span>
              </div>
            }
            
            @if (application()!.decidedAt) {
              <div class="flex justify-between">
                <span class="text-gray-600">Decision</span>
                <span class="font-medium text-gray-900 text-sm">{{ formatDate(application()!.decidedAt) }}</span>
              </div>
            }
            
            <div class="flex justify-between border-t pt-3">
              <span class="text-gray-600">Last Updated</span>
              <span class="font-medium text-gray-900 text-sm">{{ formatDate(application()!.updatedAt) }}</span>
            </div>
          </div>
        </div>

        
      </div>
    </div>
  </div>
</div>

                <!-- Applicant Profile with AI Insights -->
                <div class="card">
                  
<!-- Applicant Profile with Real Data -->
@if (application()) {
  <app-applicant-profile 
    [application]="application()!" 
    [applicant]="application()!.applicant">
  </app-applicant-profile>
}

@if (isLoading()) {
  <div class="card">
    <div class="p-6">
      <div class="flex items-center justify-center py-8">
        <lucide-icon [img]="Loader2Icon" [size]="24" class="animate-spin text-blue-600 mr-2"></lucide-icon>
        <span class="text-gray-600">Loading applicant profile...</span>
      </div>
    </div>
  </div>
}

@if (error()) {
  <div class="card">
    <div class="p-6">
      <div class="flex items-center justify-center py-8 text-red-600">
        <lucide-icon [img]="AlertCircleIcon" [size]="20" class="mr-2"></lucide-icon>
        <span>Unable to load applicant profile: {{ error() }}</span>
      </div>
    </div>
  </div>
}
                </div>

             
<div class="mt-4">
            <app-application-tabs
  [application]="application()"
  [opportunity]="opportunity()"
  (marketResearchRequested)="onMarketResearchRequested()">
</app-application-tabs>
</div>
          
          
            </div>
 <div class="col-span-4">
                <div class="  rounded-xl text-white">

            <!-- AI Analysis Hub -->
             <app-ai-assistant></app-ai-assistant>
          </div>
 </div> 
        </div>
    </div>