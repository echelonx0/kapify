<!-- MODERN INSTITUTIONAL FUNDER PROFILE -->

<div class="min-h-screen bg-slate-950">
  <!-- STICKY NAV -->
  <header
    class="sticky top-0 z-50 bg-slate-950/80 backdrop-blur-xl border-b border-slate-800/50"
  >
    <div class="max-w-7xl mx-auto px-6 py-4 flex items-center justify-between">
      @if (profile()?.logoUrl) {
      <img
        [src]="profile()!.logoUrl"
        [alt]="profile()!.organizationName"
        class="h-7 w-auto"
      />
      } @else {
      <span class="text-sm font-black text-white tracking-tight">{{
        profile()?.organizationName
      }}</span>
      }

      <nav
        class="hidden lg:flex items-center gap-8 text-xs font-bold uppercase tracking-wider text-slate-300"
      >
        <a href="#what-we-fund" class="hover:text-emerald-400 transition-colors"
          >Sectors</a
        >
        <a
          href="#investment-range"
          class="hover:text-emerald-400 transition-colors"
          >Investment</a
        >
        <a href="#team" class="hover:text-emerald-400 transition-colors"
          >Team</a
        >
      </nav>

      <button
        (click)="startApplication()"
        class="px-6 py-2.5 bg-emerald-500 hover:bg-emerald-600 text-slate-950 font-bold rounded-lg transition-all text-sm shadow-lg hover:shadow-emerald-500/50"
      >
        Apply
      </button>
    </div>
  </header>

  @if (isLoading()) {
  <div class="min-h-screen flex items-center justify-center">
    <div
      class="w-8 h-8 border-3 border-emerald-500/30 border-t-emerald-500 rounded-full animate-spin"
    ></div>
  </div>
  } @else if (error()) {
  <div class="min-h-screen flex items-center justify-center px-6">
    <div class="max-w-md text-center">
      <h1 class="text-3xl font-black text-white mb-3">Profile Not Found</h1>
      <p class="text-slate-300">
        This profile doesn't exist or has been archived.
      </p>
    </div>
  </div>
  } @else {
  <!-- HERO: BOLD, MODERN, ASYMMETRIC -->
  <section class="relative overflow-hidden bg-slate-950 pt-20 pb-0">
    <!-- Gradient backdrop -->
    <div
      class="absolute inset-0 bg-gradient-to-br from-slate-950 via-blue-950 to-slate-900"
    ></div>

    <!-- Animated blobs -->
    <div
      class="absolute top-0 right-0 w-96 h-96 bg-emerald-500/10 rounded-full blur-3xl animate-pulse"
    ></div>
    <div
      class="absolute bottom-1/4 -left-1/4 w-96 h-96 bg-teal-500/5 rounded-full blur-3xl"
    ></div>

    <div class="relative max-w-7xl mx-auto px-6">
      <div class="grid grid-cols-1 lg:grid-cols-2 gap-12 items-stretch">
        <!-- LEFT: COPY -->
        <div class="space-y-10 py-16 lg:py-36 flex flex-col justify-center">
          <!-- Badge -->
          @if ((profile()?.certifications?.length ?? 0) > 0) {
          <div class="inline-flex items-center gap-2 w-fit">
            <div
              class="h-2 w-2 rounded-full bg-emerald-400 animate-pulse"
            ></div>
            <p
              class="text-xs uppercase tracking-widest text-emerald-300 font-bold"
            >
              Backed by institutional capital
            </p>
          </div>
          }

          <!-- Headline -->
          <div class="space-y-6">
            <h1
              class="text-6xl lg:text-7xl xl:text-8xl font-black text-white leading-none tracking-tighter"
            >
              {{ profile()?.tagline }}
            </h1>
            <div
              class="h-1.5 w-32 bg-gradient-to-r from-emerald-400 via-teal-400 to-cyan-400"
            ></div>
          </div>

          <!-- Subheading -->
          @if (profile()?.elevator_pitch) {
          <p
            class="text-lg lg:text-xl text-slate-200 leading-relaxed max-w-2xl"
          >
            {{ profile()!.elevator_pitch }}
          </p>
          }

          <!-- Trust badges -->
          @if ((profile()?.certifications?.length ?? 0) > 0) {
          <div class="flex flex-wrap gap-2">
            @for (cert of profile()!.certifications!.slice(0, 4); track cert) {
            <span
              class="text-xs font-semibold text-slate-200 px-3 py-1.5 rounded-full bg-white/5 border border-emerald-500/30 backdrop-blur-sm"
              >✓ {{ cert }}</span
            >
            }
          </div>
          }

          <!-- CTAs -->
          <div class="flex flex-col sm:flex-row gap-4 pt-4">
            <button
              (click)="startApplication()"
              class="group px-8 py-4 bg-emerald-500 hover:bg-emerald-600 text-white font-bold rounded-lg transition-all shadow-2xl hover:shadow-emerald-500/50 hover:scale-105 inline-flex items-center gap-3 w-fit"
            >
              Apply Now
              <svg
                class="w-5 h-5 group-hover:translate-x-1 transition-transform"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2.5"
                  d="M13 7l5 5m0 0l-5 5m5-5H6"
                />
              </svg>
            </button>
            @if (profile()?.heroVideo?.url) {
            <button
              (click)="playVideo()"
              class="px-8 py-4 border-2 border-slate-400 text-white font-semibold rounded-lg hover:border-emerald-400 hover:bg-white/5 transition-all inline-flex items-center gap-3"
            >
              <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                <path
                  d="M6.3 2.841A1.5 1.5 0 004 4.11V15.89a1.5 1.5 0 002.3 1.269l9.344-5.89a1.5 1.5 0 000-2.538L6.3 2.84z"
                />
              </svg>
              Watch
            </button>
            }
          </div>
        </div>

        <!-- RIGHT: VISUAL -->
        <div class="relative lg:py-0 py-12">
          <div
            class="absolute -top-20 -right-20 w-96 h-96 bg-gradient-to-br from-emerald-500/15 to-teal-500/5 rounded-full blur-3xl"
          ></div>

          <div
            class="relative h-96 lg:h-full min-h-[400px] flex items-center justify-center"
          >
            @if (profile()?.heroVideo?.url) {
            <div
              class="relative w-full h-full group cursor-pointer"
              (click)="playVideo()"
            >
              <!-- Angled frame -->
              <div
                class="absolute inset-0 bg-gradient-to-br from-emerald-500 to-teal-600 rounded-3xl transform -rotate-6 group-hover:rotate-0 transition-transform duration-500 shadow-2xl"
              ></div>

              <!-- Content -->
              <div
                class="relative inset-1 rounded-3xl overflow-hidden bg-slate-900"
              >
                @if (profile()?.heroVideo?.thumbnail) {
                <img
                  [src]="profile()!.heroVideo!.thumbnail"
                  alt="Hero"
                  class="w-full h-full object-cover group-hover:scale-110 transition-transform duration-500"
                />
                } @else {
                <div
                  class="w-full h-full bg-gradient-to-br from-slate-800 to-slate-900"
                ></div>
                }
                <div
                  class="absolute inset-0 bg-gradient-to-t from-black/40 to-transparent group-hover:from-black/20 transition-colors flex items-center justify-center"
                >
                  <button
                    class="w-16 h-16 bg-emerald-500 rounded-full flex items-center justify-center shadow-2xl group-hover:scale-125 group-hover:bg-emerald-400 transition-all"
                  >
                    <svg
                      class="w-7 h-7 text-white ml-1"
                      fill="currentColor"
                      viewBox="0 0 20 20"
                    >
                      <path
                        d="M6.3 2.841A1.5 1.5 0 004 4.11V15.89a1.5 1.5 0 002.3 1.269l9.344-5.89a1.5 1.5 0 000-2.538L6.3 2.84z"
                      />
                    </svg>
                  </button>
                </div>
              </div>
            </div>
            } @else {
            <div
              class="absolute inset-0 bg-gradient-to-br from-emerald-500 to-teal-600 rounded-3xl transform -rotate-6 shadow-2xl"
            ></div>
            <div
              class="relative inset-1 rounded-3xl bg-gradient-to-br from-slate-800 to-slate-900"
            ></div>
            }
          </div>

          <!-- Proof points card (bottom left) -->
          @if ((profile()?.portfolioHighlights?.length ?? 0) > 0) {
          <div
            class="hidden lg:block absolute -bottom-4 -left-8 space-y-3 bg-gradient-to-br from-white/95 to-slate-50 backdrop-blur-md p-6 rounded-2xl shadow-2xl max-w-xs"
          >
            @for (highlight of profile()!.portfolioHighlights!.slice(0, 2);
            track highlight) {
            <div class="flex items-start gap-3">
              <div
                class="w-5 h-5 rounded-full bg-emerald-500 flex-shrink-0 flex items-center justify-center"
              >
                <svg
                  class="w-3 h-3 text-white"
                  fill="currentColor"
                  viewBox="0 0 20 20"
                >
                  <path
                    fill-rule="evenodd"
                    d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"
                    clip-rule="evenodd"
                  />
                </svg>
              </div>
              <span class="text-sm font-semibold text-slate-900">{{
                highlight
              }}</span>
            </div>
            }
          </div>
          }
        </div>
      </div>
    </div>

    <!-- Diagonal divider -->
    <div
      class="absolute bottom-0 left-0 right-0 h-32 bg-white transform -skew-y-2 -mb-1"
    ></div>
  </section>

  <!-- KEY METRICS -->
  @if ((getKeyMetrics().length) > 0) {
  <section class="py-24 bg-white">
    <div class="max-w-7xl mx-auto px-6">
      <div class="grid grid-cols-1 md:grid-cols-3 gap-16">
        @for (metric of getKeyMetrics(); track metric.label) {
        <div class="text-center">
          <div class="text-6xl lg:text-7xl font-black text-slate-900 mb-2">
            {{ metric.value }}
          </div>
          <div
            class="text-xs font-bold uppercase tracking-widest text-slate-500"
          >
            {{ metric.label }}
          </div>
        </div>
        }
      </div>
    </div>
  </section>
  }

  <!-- WHAT WE FUND -->
  @if ((profile()?.fundingAreas?.length ?? 0) > 0) {
  <section id="what-we-fund" class="py-28 bg-slate-50">
    <div class="max-w-7xl mx-auto px-6">
      <div class="mb-20">
        <span
          class="inline-block text-xs font-bold uppercase tracking-widest text-emerald-600 mb-4"
          >Investment Sectors</span
        >
        <h2 class="text-5xl lg:text-6xl font-black text-slate-900 mb-6">
          What We Fund
        </h2>
        <p class="text-lg text-slate-600 max-w-2xl">
          Cutting-edge companies tackling tomorrow's problems in today's
          fastest-growing verticals.
        </p>
      </div>

      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
        @for (area of getTopFundingAreas(); track area.name) {
        <div
          class="group p-8 rounded-2xl bg-white border border-slate-200 hover:border-emerald-300 hover:shadow-xl transition-all duration-300 cursor-pointer hover:-translate-y-1"
        >
          <div
            class="flex items-center justify-center h-16 w-16 rounded-xl bg-gradient-to-br from-emerald-500 to-teal-600 text-white mb-6 group-hover:scale-110 transition-transform"
          >
            <svg class="w-8 h-8" fill="currentColor" viewBox="0 0 20 20">
              <path
                fill-rule="evenodd"
                d="M12.316 3.051a1 1 0 01.633 1.265l-4 12a1 1 0 11-1.898-.632l4-12a1 1 0 011.265-.633zM5.707 6.293a1 1 0 010 1.414L3.414 10l2.293 2.293a1 1 0 11-1.414 1.414l-3-3a1 1 0 010-1.414l3-3a1 1 0 011.414 0zm8.586 0a1 1 0 011.414 0l3 3a1 1 0 010 1.414l-3 3a1 1 0 11-1.414-1.414L16.586 10l-2.293-2.293a1 1 0 010-1.414z"
                clip-rule="evenodd"
              />
            </svg>
          </div>
          <h3
            class="text-lg font-bold text-slate-900 mb-3 group-hover:text-emerald-600 transition-colors"
          >
            {{ area.name }}
          </h3>
          @if (area.description) {
          <p class="text-sm text-slate-600 leading-relaxed mb-4">
            {{ area.description }}
          </p>
          } @if ((area.tags.length) > 0) {
          <div class="flex flex-wrap gap-2">
            @for (tag of area.tags!.slice(0, 3); track tag) {
            <span
              class="px-2.5 py-1 bg-emerald-50 text-emerald-700 text-xs font-bold rounded-full border border-emerald-200"
              >{{ tag }}</span
            >
            }
          </div>
          }
        </div>
        }
      </div>
    </div>
  </section>
  }

  <!-- INVESTMENT RANGE -->
  @if (profile()?.investmentRange) {
  <section id="investment-range" class="py-28 bg-slate-950">
    <div class="max-w-7xl mx-auto px-6">
      <div class="mb-20">
        <span
          class="inline-block text-xs font-bold uppercase tracking-widest text-emerald-400 mb-4"
          >Ticket Sizes</span
        >
        <h2 class="text-5xl lg:text-6xl font-black text-white">
          Investment Range
        </h2>
      </div>

      <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
        <div
          class="rounded-2xl bg-gradient-to-br from-slate-800 to-slate-900 p-10 border border-slate-700"
        >
          <p
            class="text-xs uppercase tracking-widest text-slate-400 font-bold mb-4"
          >
            Minimum
          </p>
          <p class="text-6xl font-black text-white mb-4">
            {{ formatAmount(profile()!.investmentRange!.min) }}
          </p>
          <p class="text-xs text-slate-500">
            {{ profile()!.investmentRange!.currency }}
          </p>
        </div>

        @if (typicalInvestment > 0) {
        <div
          class="rounded-2xl bg-gradient-to-br from-emerald-600 to-teal-600 p-10 border-2 border-emerald-500 shadow-2xl shadow-emerald-500/20 relative"
        >
          <div
            class="absolute -top-3 right-6 px-3 py-1 bg-emerald-600 text-xs font-bold text-white rounded-full"
          >
            Most Common
          </div>
          <p
            class="text-xs uppercase tracking-widest text-emerald-100 font-bold mb-4"
          >
            Typical
          </p>
          <p class="text-6xl font-black text-white mb-4">
            {{ formatAmount(typicalInvestment) }}
          </p>
          <p class="text-xs text-emerald-100">
            {{ profile()!.investmentRange!.currency }}
          </p>
        </div>
        }

        <div
          class="rounded-2xl bg-gradient-to-br from-slate-800 to-slate-900 p-10 border border-slate-700"
        >
          <p
            class="text-xs uppercase tracking-widest text-slate-400 font-bold mb-4"
          >
            Maximum
          </p>
          <p class="text-6xl font-black text-white mb-4">
            {{ formatAmount(profile()!.investmentRange!.max) }}
          </p>
          <p class="text-xs text-slate-500">
            {{ profile()!.investmentRange!.currency }}
          </p>
        </div>
      </div>
    </div>
  </section>
  }

  <!-- INVESTMENT APPROACH -->
  @if (profile()?.investmentApproach) {
  <section class="py-28 bg-white">
    <div class="max-w-4xl mx-auto px-6">
      <span
        class="inline-block text-xs font-bold uppercase tracking-widest text-emerald-600 mb-6"
        >Philosophy</span
      >
      <h2 class="text-5xl lg:text-6xl font-black text-slate-900 mb-10">
        Our Investment Approach
      </h2>
      <p class="text-xl text-slate-700 leading-relaxed">
        {{ profile()!.investmentApproach }}
      </p>
    </div>
  </section>
  }

  <!-- ✅ NEW: ACTIVE OPPORTUNITIES GRID COMPONENT -->
  <app-funder-opportunities-grid
    [organizationId]="profile()?.organizationId || ''"
  ></app-funder-opportunities-grid>

  <!-- HOW IT WORKS -->
  <section class="py-28 bg-slate-50">
    <div class="max-w-7xl mx-auto px-6">
      <div class="mb-20">
        <span
          class="inline-block text-xs font-bold uppercase tracking-widest text-emerald-600 mb-4"
          >Timeline</span
        >
        <h2 class="text-5xl lg:text-6xl font-black text-slate-900">
          The Process
        </h2>
      </div>

      <div class="max-w-4xl">
        <div class="space-y-8">
          <div class="flex gap-8 items-stretch">
            <div class="flex flex-col items-center">
              <div
                class="flex items-center justify-center h-12 w-12 rounded-full bg-emerald-500 text-white font-black shadow-lg"
              >
                1
              </div>
              <div
                class="w-0.5 h-24 bg-gradient-to-b from-emerald-500 to-slate-200 mt-4"
              ></div>
            </div>
            <div class="pb-8">
              <h4 class="text-2xl font-black text-slate-900 mb-2">
                Submit Application
              </h4>
              <p class="text-slate-600">
                Share your pitch, metrics, and vision. ~10 minutes to complete.
              </p>
            </div>
          </div>

          <div class="flex gap-8 items-stretch">
            <div class="flex flex-col items-center">
              <div
                class="flex items-center justify-center h-12 w-12 rounded-full bg-emerald-500 text-white font-black shadow-lg"
              >
                2
              </div>
              <div
                class="w-0.5 h-24 bg-gradient-to-b from-emerald-500 to-slate-200 mt-4"
              ></div>
            </div>
            <div class="pb-8">
              <h4 class="text-2xl font-black text-slate-900 mb-2">We Review</h4>
              <p class="text-slate-600">
                @if (profile()?.responseTimePromise) {
                {{ profile()!.responseTimePromise }}
                } @else { Feedback within 5-7 business days. }
              </p>
            </div>
          </div>

          <div class="flex gap-8 items-stretch">
            <div class="flex flex-col items-center">
              <div
                class="flex items-center justify-center h-12 w-12 rounded-full bg-emerald-500 text-white font-black shadow-lg"
              >
                3
              </div>
            </div>
            <div>
              <h4 class="text-2xl font-black text-slate-900 mb-2">
                Partner & Close
              </h4>
              <p class="text-slate-600">
                Due diligence, negotiation, and funding. Typical close: 60 days.
              </p>
            </div>
          </div>
        </div>

        <button
          (click)="startApplication()"
          class="mt-12 px-8 py-4 bg-emerald-500 hover:bg-emerald-600 text-white font-bold rounded-lg transition-all shadow-lg hover:shadow-emerald-500/50"
        >
          Start Your Application
        </button>
      </div>
    </div>
  </section>

  <!-- TEAM -->
  @if ((getLeadership().length ) > 0) {
  <section id="team" class="py-28 bg-slate-950">
    <div class="max-w-7xl mx-auto px-6">
      <div class="mb-20">
        <span
          class="inline-block text-xs font-bold uppercase tracking-widest text-emerald-400 mb-4"
          >Leadership</span
        >
        <h2 class="text-5xl lg:text-6xl font-black text-white mb-6">
          Meet the Founders
        </h2>
        <p class="text-lg text-slate-300 max-w-2xl">
          Operators, strategists, and builders with deep domain expertise.
        </p>
      </div>

      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
        @for (member of getLeadership(); track member.name) {
        <div
          class="group overflow-hidden rounded-2xl bg-gradient-to-b from-slate-800 to-slate-900 border border-slate-700 hover:border-emerald-500 transition-all duration-300 hover:shadow-2xl hover:shadow-emerald-500/10"
        >
          @if (member.imageUrl) {
          <img
            [src]="member.imageUrl"
            [alt]="member.name"
            class="w-full h-72 object-cover group-hover:scale-110 transition-transform duration-300"
          />
          } @else {
          <div
            class="w-full h-72 bg-gradient-to-br from-slate-700 to-slate-800"
          ></div>
          }

          <div class="p-8">
            <h3 class="text-xl font-black text-white mb-1">
              {{ member.name }}
            </h3>
            <p class="text-sm font-bold text-emerald-400 mb-4">
              {{ member.title }}
            </p>
            @if (member.bio) {
            <p class="text-sm text-slate-300 leading-relaxed mb-6">
              {{ member.bio }}
            </p>
            } @if (member.linkedinUrl) {
            <a
              [href]="member.linkedinUrl"
              target="_blank"
              class="text-sm font-bold text-emerald-400 hover:text-emerald-300 inline-flex items-center gap-2 transition-colors"
            >
              Connect →
            </a>
            }
          </div>
        </div>
        }
      </div>
    </div>
  </section>
  }

  <!-- FOOTER -->
  <footer class="bg-slate-900 border-t border-slate-800">
    <div class="max-w-7xl mx-auto px-6 py-24">
      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-16 mb-16">
        <!-- Brand -->
        <div class="space-y-4">
          @if (profile()?.logoUrl) {
          <img
            [src]="profile()!.logoUrl"
            [alt]="profile()!.organizationName"
            class="h-8 w-auto"
          />
          } @else {
          <h3 class="text-lg font-black text-white">
            {{ profile()?.organizationName }}
          </h3>
          } @if (profile()?.elevator_pitch) {
          <p class="text-sm text-slate-400">{{ profile()!.elevator_pitch }}</p>
          }
        </div>

        <!-- Links -->
        <div>
          <h4
            class="text-xs font-black uppercase tracking-widest text-white mb-6"
          >
            Navigation
          </h4>
          <ul class="space-y-3 text-sm text-slate-300">
            <li>
              <a
                href="#what-we-fund"
                class="hover:text-emerald-400 transition-colors"
                >Sectors</a
              >
            </li>
            <li>
              <a
                href="#investment-range"
                class="hover:text-emerald-400 transition-colors"
                >Investment</a
              >
            </li>
            <li>
              <a href="#team" class="hover:text-emerald-400 transition-colors"
                >Team</a
              >
            </li>
          </ul>
        </div>

        <!-- Company -->
        <div>
          <h4
            class="text-xs font-black uppercase tracking-widest text-white mb-6"
          >
            Company
          </h4>
          <ul class="space-y-3 text-sm text-slate-300">
            <li>
              <a href="#" class="hover:text-emerald-400 transition-colors"
                >About</a
              >
            </li>
            <li>
              <a href="#" class="hover:text-emerald-400 transition-colors"
                >Portfolio</a
              >
            </li>
            <li>
              <a href="#" class="hover:text-emerald-400 transition-colors"
                >Blog</a
              >
            </li>
          </ul>
        </div>

        <!-- Social -->
        <div>
          <h4
            class="text-xs font-black uppercase tracking-widest text-white mb-6"
          >
            Connect
          </h4>
          @if ((profile()?.socialLinks?.length ?? 0) > 0) {
          <div class="space-y-3 text-sm text-slate-300 mb-8">
            @for (link of profile()!.socialLinks!; track link.platform) {
            <a
              [href]="link.url"
              target="_blank"
              class="flex items-center gap-2 hover:text-emerald-400 transition-colors capitalize"
            >
              → {{ link.displayText || link.platform }}
            </a>
            }
          </div>
          }
          <button
            (click)="startApplication()"
            class="w-full px-4 py-3 bg-emerald-500 hover:bg-emerald-600 text-white font-bold rounded-lg transition-all text-sm"
          >
            Apply Now
          </button>
        </div>
      </div>

      <!-- Bottom -->
      <div
        class="border-t border-slate-800 pt-8 flex flex-col md:flex-row justify-between items-center gap-6 text-xs text-slate-400"
      >
        <p>&copy; {{ profile()?.organizationName }}. Built for founders.</p>
        <div class="flex gap-6">
          <a href="#" class="hover:text-emerald-400 transition-colors"
            >Privacy</a
          >
          <a href="#" class="hover:text-emerald-400 transition-colors">Terms</a>
          <a href="#" class="hover:text-emerald-400 transition-colors"
            >Cookies</a
          >
        </div>
      </div>
    </div>
  </footer>
  }
</div>
