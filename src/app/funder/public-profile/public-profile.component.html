<div class="min-h-screen bg-slate-950">
  <!-- Header -->
  <app-funder-profile-header [profile]="profile()" />

  @if (isLoading()) {
    <div class="min-h-screen flex items-center justify-center">
      <div
        class="w-8 h-8 border-3 border-emerald-500/30 border-t-emerald-500 rounded-full animate-spin"
      ></div>
    </div>
  } @else if (error()) {
    <div class="min-h-screen flex items-center justify-center px-6">
      <div class="max-w-md text-center">
        <h1 class="text-3xl font-black text-white mb-3">Profile Not Found</h1>
        <p class="text-slate-300">
          This profile doesn't exist or has been archived.
        </p>
      </div>
    </div>
  } @else {
    <!-- INVESTMENT APPROACH -->
    @if (profile()?.investmentApproach) {
      <section class="py-28 bg-white">
        <div class="max-w-4xl mx-auto px-6">
          <span
            class="inline-block text-xs font-bold uppercase tracking-widest text-emerald-600 mb-6"
            >About us</span
          >
          <h2 class="text-3xl lg:text-4xl font-black text-slate-900 mb-10">
            <!-- Our Investment Approach -->
            Who We Are
          </h2>
          <p class="text-sm text-slate-700 leading-relaxed">
            <!-- {{ profile()!.investmentApproach }} -->
            {{ profile()!.elevator_pitch }}
          </p>
        </div>
      </section>
    }

    <!-- WHAT WE FUND (Extracted Component) -->
    @if (
      (profile()?.fundingAreas?.length ?? 0) > 0 &&
      profile()?.investmentApproach
    ) {
      <app-funder-what-we-fund
        [fundingAreas]="getTopFundingAreas()"
        [description]="profile()?.investmentApproach"
      ></app-funder-what-we-fund>
    }

    <!-- INVESTMENT RANGE -->
    @if (profile()?.investmentRange) {
      <section id="investment-range" class="py-28 bg-slate-950">
        <div class="max-w-7xl mx-auto px-6">
          <div class="mb-20">
            <span
              class="inline-block text-xs font-bold uppercase tracking-widest text-emerald-400 mb-4"
              >Ticket Sizes</span
            >
            <h2 class="text-5xl lg:text-6xl font-black text-white">
              Investment Range
            </h2>
          </div>

          <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
            <div
              class="rounded-2xl bg-gradient-to-br from-slate-800 to-slate-900 p-10 border border-slate-700"
            >
              <p
                class="text-xs uppercase tracking-widest text-slate-400 font-bold mb-4"
              >
                Minimum
              </p>
              <p class="text-6xl font-black text-white mb-4">
                {{ formatAmount(profile()!.investmentRange!.min) }}
              </p>
              <p class="text-xs text-slate-500">
                {{ profile()!.investmentRange!.currency }}
              </p>
            </div>

            @if (typicalInvestment > 0) {
              <div
                class="rounded-2xl bg-gradient-to-br from-emerald-600 to-teal-600 p-10 border-2 border-emerald-500 shadow-2xl shadow-emerald-500/20 relative"
              >
                <div
                  class="absolute -top-3 right-6 px-3 py-1 bg-emerald-600 text-xs font-bold text-white rounded-full"
                >
                  Most Common
                </div>
                <p
                  class="text-xs uppercase tracking-widest text-emerald-100 font-bold mb-4"
                >
                  Typical
                </p>
                <p class="text-6xl font-black text-white mb-4">
                  {{ formatAmount(typicalInvestment) }}
                </p>
                <p class="text-xs text-emerald-100">
                  {{ profile()!.investmentRange!.currency }}
                </p>
              </div>
            }

            <div
              class="rounded-2xl bg-gradient-to-br from-slate-800 to-slate-900 p-10 border border-slate-700"
            >
              <p
                class="text-xs uppercase tracking-widest text-slate-400 font-bold mb-4"
              >
                Maximum
              </p>
              <p class="text-6xl font-black text-white mb-4">
                {{ formatAmount(profile()!.investmentRange!.max) }}
              </p>
              <p class="text-xs text-slate-500">
                {{ profile()!.investmentRange!.currency }}
              </p>
            </div>
          </div>
        </div>
      </section>
    }

    <!-- ACTIVE OPPORTUNITIES -->
    <app-funder-opportunities-grid
      [organizationId]="profile()?.organizationId || ''"
    ></app-funder-opportunities-grid>

    <!-- FOOTER -->
    <footer class="bg-slate-900 border-t border-slate-800">
      <div class="max-w-7xl mx-auto px-6 py-24">
        <div
          class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-16 mb-16"
        >
          <!-- Brand -->
          <div class="space-y-4 font-black text-sm text-white">
            Nothing on this page should be considered a financial offer or
            presentation.
            <!-- <h3 class="font-black text-white">
              {{ profile()?.organizationName }}
            </h3>
            <p class="text-sm text-slate-300 leading-relaxed">
              Empowering founders with access to funding and resources to build
              the future.
            </p> -->
          </div>

          <!-- Links -->
          <div>
            <h4
              class="text-xs font-black uppercase tracking-widest text-white mb-6"
            >
              Navigation
            </h4>
            <ul class="space-y-3 text-sm text-slate-300">
              <li>
                <a
                  href="#what-we-fund"
                  class="hover:text-emerald-400 transition-colors"
                  >Sectors</a
                >
              </li>
              <li>
                <a
                  href="#investment-range"
                  class="hover:text-emerald-400 transition-colors"
                  >Investment</a
                >
              </li>
              <li>
                <a href="#team" class="hover:text-emerald-400 transition-colors"
                  >Team</a
                >
              </li>
            </ul>
          </div>

          <!-- Company -->
          <div>
            <h4
              class="text-xs font-black uppercase tracking-widest text-white mb-6"
            >
              Company
            </h4>
            <ul class="space-y-3 text-sm text-slate-300">
              <li>
                <a href="#" class="hover:text-emerald-400 transition-colors"
                  >About</a
                >
              </li>
              <li>
                <a href="#" class="hover:text-emerald-400 transition-colors"
                  >Portfolio</a
                >
              </li>
              <li>
                <a href="#" class="hover:text-emerald-400 transition-colors"
                  >Blog</a
                >
              </li>
            </ul>
          </div>

          <!-- Social -->
          <div>
            <h4
              class="text-xs font-black uppercase tracking-widest text-white mb-6"
            >
              Connect
            </h4>
            @if ((profile()?.socialLinks?.length ?? 0) > 0) {
              <div class="space-y-3 text-sm text-slate-300 mb-8">
                @for (link of profile()!.socialLinks!; track link.platform) {
                  <a
                    [href]="link.url"
                    target="_blank"
                    class="flex items-center gap-2 hover:text-emerald-400 transition-colors capitalize"
                  >
                    â†’ {{ link.displayText || link.platform }}
                  </a>
                }
              </div>
            }
            <button
              (click)="startApplication()"
              class="w-full px-4 py-3 bg-emerald-500 hover:bg-emerald-600 text-white font-bold rounded-lg transition-all text-sm"
            >
              Apply Now
            </button>
          </div>
        </div>

        <!-- Bottom -->
        <div
          class="border-t border-slate-800 pt-8 flex flex-col md:flex-row justify-between items-center gap-6 text-xs text-slate-400"
        >
          <p>&copy; Kapify | Built for founders.</p>
          <div class="flex gap-6">
            <a href="#" class="hover:text-emerald-400 transition-colors"
              >Privacy</a
            >
            <a href="#" class="hover:text-emerald-400 transition-colors"
              >Terms</a
            >
            <a href="#" class="hover:text-emerald-400 transition-colors"
              >Cookies</a
            >
          </div>
        </div>
      </div>
    </footer>
  }
</div>
