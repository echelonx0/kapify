<!-- src/app/funder/components/application-detail/components/application-metrics/application-metrics.component.html -->

<!-- Tab Navigation -->
<div class="border-b border-slate-200 mb-6">
  <nav class="flex gap-1 overflow-x-auto overflow-y-hidden">
    @for (tab of tabs; track tab.id) {
    <button
      (click)="setActiveTab(tab.id)"
      [class.bg-orange-50]="activeTab() === tab.id"
      [class.text-orange-700]="activeTab() === tab.id"
      [class.border-b-2]="activeTab() === tab.id"
      [class.border-orange-500]="activeTab() === tab.id"
      [class.text-slate-600]="activeTab() !== tab.id"
      [class.hover:text-slate-900]="activeTab() !== tab.id"
      [class.hover:bg-slate-50]="activeTab() !== tab.id"
      class="flex items-center gap-2 px-4 py-2 text-sm font-medium whitespace-nowrap transition-colors duration-200 -mb-px"
    >
      <lucide-icon [img]="tab.icon" [size]="16" />
      <span>{{ tab.label }}</span>
    </button>
    }
  </nav>
</div>

<!-- Tab Content -->
<div class="space-y-6">
  <!-- OVERVIEW TAB -->
  @if (activeTab() === 'overview') {
  <div class="space-y-6">
    <!-- Application Summary -->
    <div class="grid grid-cols-3 gap-4">
      @if (requestedAmount()) {
      <div class="bg-orange-50 border border-orange-200/50 rounded-xl p-4">
        <div class="flex items-center gap-2 mb-2">
          <lucide-icon [img]="DollarSignIcon" class="w-4 h-4 text-orange-600" />
          <span class="text-xs font-semibold text-orange-900"
            >Requested Amount</span
          >
        </div>
        <p class="text-lg font-bold text-orange-900">
          {{ formatCurrency(requestedAmount()!, opportunity.currency) }}
        </p>
      </div>
      } @if (opportunity.offerAmount) {
      <div class="bg-green-50 border border-green-200/50 rounded-xl p-4">
        <div class="flex items-center gap-2 mb-2">
          <lucide-icon [img]="DollarSignIcon" class="w-4 h-4 text-green-600" />
          <span class="text-xs font-semibold text-green-900"
            >Available Funding</span
          >
        </div>
        <p class="text-lg font-bold text-green-900">
          {{ formatCurrency(opportunity.offerAmount, opportunity.currency) }}
        </p>
      </div>
      } @if (timeline()) {
      <div class="bg-blue-50 border border-blue-200/50 rounded-xl p-4">
        <div class="flex items-center gap-2 mb-2">
          <lucide-icon [img]="CalendarIcon" class="w-4 h-4 text-blue-600" />
          <span class="text-xs font-semibold text-blue-900">Timeline</span>
        </div>
        <p class="text-lg font-bold text-blue-900">{{ timeline() }}</p>
      </div>
      }
    </div>

    <!-- Purpose Statement -->
    @if (purposeStatement()) {
    <div class="bg-slate-50 border border-slate-200 rounded-xl p-4">
      <div class="flex items-start gap-2 mb-3">
        <lucide-icon [img]="TargetIcon" class="w-5 h-5 text-slate-600 mt-0.5" />
        <h3 class="text-sm font-semibold text-slate-900">Purpose Statement</h3>
      </div>
      <p class="text-sm text-slate-700 leading-relaxed">
        {{ purposeStatement() }}
      </p>
    </div>
    }

    <!-- Use of Funds -->
    @if (useOfFunds()) {
    <div class="bg-slate-50 border border-slate-200 rounded-xl p-4">
      <div class="flex items-start gap-2 mb-3">
        <lucide-icon
          [img]="FileTextIcon"
          class="w-5 h-5 text-slate-600 mt-0.5"
        />
        <h3 class="text-sm font-semibold text-slate-900">Use of Funds</h3>
      </div>
      <p class="text-sm text-slate-700 leading-relaxed">{{ useOfFunds() }}</p>
    </div>
    }

    <!-- Quick Stats Grid -->
    <div class="grid grid-cols-2 gap-4">
      @if (businessInfo()?.companyName) {
      <div class="bg-white border border-slate-200 rounded-xl p-4">
        <div class="flex items-center gap-2 mb-2">
          <lucide-icon [img]="BuildingIcon" class="w-4 h-4 text-slate-500" />
          <span class="text-xs font-medium text-slate-600">Company</span>
        </div>
        <p class="text-sm font-semibold text-slate-900">
          {{ businessInfo()!.companyName }}
        </p>
      </div>
      } @if (businessInfo()?.industry) {
      <div class="bg-white border border-slate-200 rounded-xl p-4">
        <div class="flex items-center gap-2 mb-2">
          <lucide-icon [img]="BriefcaseIcon" class="w-4 h-4 text-slate-500" />
          <span class="text-xs font-medium text-slate-600">Industry</span>
        </div>
        <p class="text-sm font-semibold text-slate-900">
          {{ businessInfo()!.industry }}
        </p>
      </div>
      } @if (financialInfo()?.annualRevenue) {
      <div class="bg-white border border-slate-200 rounded-xl p-4">
        <div class="flex items-center gap-2 mb-2">
          <lucide-icon [img]="TrendingUpIcon" class="w-4 h-4 text-slate-500" />
          <span class="text-xs font-medium text-slate-600">Annual Revenue</span>
        </div>
        <p class="text-sm font-semibold text-slate-900">
          {{ financialInfo()!.annualRevenue }}
        </p>
      </div>
      } @if (businessInfo()?.numberOfEmployees) {
      <div class="bg-white border border-slate-200 rounded-xl p-4">
        <div class="flex items-center gap-2 mb-2">
          <lucide-icon [img]="UsersIcon" class="w-4 h-4 text-slate-500" />
          <span class="text-xs font-medium text-slate-600">Employees</span>
        </div>
        <p class="text-sm font-semibold text-slate-900">
          {{ businessInfo()!.numberOfEmployees }}
        </p>
      </div>
      }
    </div>
  </div>
  }

  <!-- PERSONAL INFO TAB -->
  @if (activeTab() === 'personal' && personalInfo()) {
  <div class="space-y-4">
    <div class="grid grid-cols-2 gap-4">
      @if (personalInfo()!.firstName || personalInfo()!.lastName) {
      <div class="bg-slate-50 border border-slate-200 rounded-xl p-4">
        <div class="flex items-start gap-3">
          <lucide-icon [img]="UserIcon" class="w-5 h-5 text-slate-600 mt-0.5" />
          <div class="flex-1 min-w-0">
            <p class="text-xs font-medium text-slate-500 mb-1">Full Name</p>
            <p class="text-sm font-semibold text-slate-900">
              {{ personalInfo()!.firstName }} {{ personalInfo()!.lastName }}
            </p>
          </div>
        </div>
      </div>
      } @if (personalInfo()!.position) {
      <div class="bg-slate-50 border border-slate-200 rounded-xl p-4">
        <div class="flex items-start gap-3">
          <lucide-icon
            [img]="BriefcaseIcon"
            class="w-5 h-5 text-slate-600 mt-0.5"
          />
          <div class="flex-1 min-w-0">
            <p class="text-xs font-medium text-slate-500 mb-1">Position</p>
            <p class="text-sm font-semibold text-slate-900">
              {{ personalInfo()!.position }}
            </p>
          </div>
        </div>
      </div>
      } @if (personalInfo()!.email) {
      <div class="bg-slate-50 border border-slate-200 rounded-xl p-4">
        <div class="flex items-start gap-3">
          <lucide-icon [img]="MailIcon" class="w-5 h-5 text-slate-600 mt-0.5" />
          <div class="flex-1 min-w-0">
            <p class="text-xs font-medium text-slate-500 mb-1">Email Address</p>
            <p class="text-sm font-semibold text-slate-900 truncate">
              {{ personalInfo()!.email }}
            </p>
          </div>
        </div>
      </div>
      } @if (personalInfo()!.phone) {
      <div class="bg-slate-50 border border-slate-200 rounded-xl p-4">
        <div class="flex items-start gap-3">
          <lucide-icon
            [img]="PhoneIcon"
            class="w-5 h-5 text-slate-600 mt-0.5"
          />
          <div class="flex-1 min-w-0">
            <p class="text-xs font-medium text-slate-500 mb-1">Phone Number</p>
            <p class="text-sm font-semibold text-slate-900">
              {{ personalInfo()!.phone }}
            </p>
          </div>
        </div>
      </div>
      } @if (personalInfo()!.idNumber) {
      <div
        class="bg-slate-50 border border-slate-200 rounded-xl p-4 col-span-2"
      >
        <div class="flex items-start gap-3">
          <lucide-icon [img]="HashIcon" class="w-5 h-5 text-slate-600 mt-0.5" />
          <div class="flex-1 min-w-0">
            <p class="text-xs font-medium text-slate-500 mb-1">ID Number</p>
            <p class="text-sm font-semibold text-slate-900">
              {{ personalInfo()!.idNumber }}
            </p>
          </div>
        </div>
      </div>
      }
    </div>
  </div>
  }

  <!-- BUSINESS INFO TAB -->
  @if (activeTab() === 'business' && businessInfo()) {
  <div class="space-y-4">
    <div class="grid grid-cols-2 gap-4">
      @if (businessInfo()!.companyName) {
      <div class="bg-slate-50 border border-slate-200 rounded-xl p-4">
        <div class="flex items-start gap-3">
          <lucide-icon
            [img]="BuildingIcon"
            class="w-5 h-5 text-slate-600 mt-0.5"
          />
          <div class="flex-1 min-w-0">
            <p class="text-xs font-medium text-slate-500 mb-1">Company Name</p>
            <p class="text-sm font-semibold text-slate-900">
              {{ businessInfo()!.companyName }}
            </p>
          </div>
        </div>
      </div>
      } @if (businessInfo()!.registrationNumber) {
      <div class="bg-slate-50 border border-slate-200 rounded-xl p-4">
        <div class="flex items-start gap-3">
          <lucide-icon [img]="HashIcon" class="w-5 h-5 text-slate-600 mt-0.5" />
          <div class="flex-1 min-w-0">
            <p class="text-xs font-medium text-slate-500 mb-1">
              Registration Number
            </p>
            <p class="text-sm font-semibold text-slate-900">
              {{ businessInfo()!.registrationNumber }}
            </p>
          </div>
        </div>
      </div>
      } @if (businessInfo()!.vatNumber) {
      <div class="bg-slate-50 border border-slate-200 rounded-xl p-4">
        <div class="flex items-start gap-3">
          <lucide-icon [img]="HashIcon" class="w-5 h-5 text-slate-600 mt-0.5" />
          <div class="flex-1 min-w-0">
            <p class="text-xs font-medium text-slate-500 mb-1">VAT Number</p>
            <p class="text-sm font-semibold text-slate-900">
              {{ businessInfo()!.vatNumber }}
            </p>
          </div>
        </div>
      </div>
      } @if (businessInfo()!.industry) {
      <div class="bg-slate-50 border border-slate-200 rounded-xl p-4">
        <div class="flex items-start gap-3">
          <lucide-icon
            [img]="BriefcaseIcon"
            class="w-5 h-5 text-slate-600 mt-0.5"
          />
          <div class="flex-1 min-w-0">
            <p class="text-xs font-medium text-slate-500 mb-1">Industry</p>
            <p class="text-sm font-semibold text-slate-900">
              {{ businessInfo()!.industry }}
            </p>
          </div>
        </div>
      </div>
      } @if (businessInfo()!.yearsInOperation) {
      <div class="bg-slate-50 border border-slate-200 rounded-xl p-4">
        <div class="flex items-start gap-3">
          <lucide-icon
            [img]="CalendarIcon"
            class="w-5 h-5 text-slate-600 mt-0.5"
          />
          <div class="flex-1 min-w-0">
            <p class="text-xs font-medium text-slate-500 mb-1">
              Years in Operation
            </p>
            <p class="text-sm font-semibold text-slate-900">
              {{ businessInfo()!.yearsInOperation }} years
            </p>
          </div>
        </div>
      </div>
      } @if (businessInfo()!.numberOfEmployees) {
      <div class="bg-slate-50 border border-slate-200 rounded-xl p-4">
        <div class="flex items-start gap-3">
          <lucide-icon
            [img]="UsersIcon"
            class="w-5 h-5 text-slate-600 mt-0.5"
          />
          <div class="flex-1 min-w-0">
            <p class="text-xs font-medium text-slate-500 mb-1">
              Number of Employees
            </p>
            <p class="text-sm font-semibold text-slate-900">
              {{ businessInfo()!.numberOfEmployees }}
            </p>
          </div>
        </div>
      </div>
      } @if (getFullAddress()) {
      <div
        class="bg-slate-50 border border-slate-200 rounded-xl p-4 col-span-2"
      >
        <div class="flex items-start gap-3">
          <lucide-icon
            [img]="MapPinIcon"
            class="w-5 h-5 text-slate-600 mt-0.5"
          />
          <div class="flex-1 min-w-0">
            <p class="text-xs font-medium text-slate-500 mb-1">
              Physical Address
            </p>
            <p class="text-sm font-semibold text-slate-900">
              {{ getFullAddress() }}
            </p>
          </div>
        </div>
      </div>
      }
    </div>
  </div>
  }

  <!-- FINANCIAL INFO TAB -->
  @if (activeTab() === 'financial' && financialInfo()) {
  <div class="space-y-4">
    <div class="grid grid-cols-2 gap-4">
      @if (financialInfo()!.annualRevenue) {
      <div class="bg-green-50 border border-green-200/50 rounded-xl p-4">
        <div class="flex items-start gap-3">
          <lucide-icon
            [img]="TrendingUpIcon"
            class="w-5 h-5 text-green-600 mt-0.5"
          />
          <div class="flex-1 min-w-0">
            <p class="text-xs font-medium text-green-700 mb-1">
              Annual Revenue
            </p>
            <p class="text-sm font-bold text-green-900">
              {{ financialInfo()!.annualRevenue }}
            </p>
          </div>
        </div>
      </div>
      } @if (financialInfo()!.monthlyRevenue) {
      <div class="bg-blue-50 border border-blue-200/50 rounded-xl p-4">
        <div class="flex items-start gap-3">
          <lucide-icon
            [img]="DollarSignIcon"
            class="w-5 h-5 text-blue-600 mt-0.5"
          />
          <div class="flex-1 min-w-0">
            <p class="text-xs font-medium text-blue-700 mb-1">
              Monthly Revenue
            </p>
            <p class="text-sm font-bold text-blue-900">
              {{ financialInfo()!.monthlyRevenue }}
            </p>
          </div>
        </div>
      </div>
      } @if (financialInfo()!.profitMargin) {
      <div class="bg-slate-50 border border-slate-200 rounded-xl p-4">
        <div class="flex items-start gap-3">
          <lucide-icon
            [img]="TrendingUpIcon"
            class="w-5 h-5 text-slate-600 mt-0.5"
          />
          <div class="flex-1 min-w-0">
            <p class="text-xs font-medium text-slate-500 mb-1">Profit Margin</p>
            <p class="text-sm font-semibold text-slate-900">
              {{ financialInfo()!.profitMargin }}
            </p>
          </div>
        </div>
      </div>
      } @if (financialInfo()!.creditRating) {
      <div class="bg-slate-50 border border-slate-200 rounded-xl p-4">
        <div class="flex items-start gap-3">
          <lucide-icon
            [img]="CreditCardIcon"
            class="w-5 h-5 text-slate-600 mt-0.5"
          />
          <div class="flex-1 min-w-0">
            <p class="text-xs font-medium text-slate-500 mb-1">Credit Rating</p>
            <p class="text-sm font-semibold text-slate-900">
              {{ financialInfo()!.creditRating }}
            </p>
          </div>
        </div>
      </div>
      } @if (financialInfo()!.existingDebt) {
      <div
        class="bg-amber-50 border border-amber-200/50 rounded-xl p-4 col-span-2"
      >
        <div class="flex items-start gap-3">
          <lucide-icon
            [img]="DollarSignIcon"
            class="w-5 h-5 text-amber-600 mt-0.5"
          />
          <div class="flex-1 min-w-0">
            <p class="text-xs font-medium text-amber-700 mb-1">Existing Debt</p>
            <p class="text-sm font-semibold text-amber-900">
              {{ financialInfo()!.existingDebt }}
            </p>
          </div>
        </div>
      </div>
      }
    </div>

    @if (financialInfo()!.bankingDetails) {
    <div class="bg-slate-50 border border-slate-200 rounded-xl p-4">
      <h4 class="text-sm font-semibold text-slate-900 mb-3">
        Banking Relationship
      </h4>
      <div class="grid grid-cols-2 gap-3">
        <div>
          <p class="text-xs text-slate-500 mb-1">Primary Bank</p>
          <p class="text-sm font-medium text-slate-900">
            {{ financialInfo()!.bankingDetails.bankName }}
          </p>
        </div>
        <div>
          <p class="text-xs text-slate-500 mb-1">Account Type</p>
          <p class="text-sm font-medium text-slate-900">
            {{ financialInfo()!.bankingDetails.accountType }}
          </p>
        </div>
        <div class="col-span-2">
          <p class="text-xs text-slate-500 mb-1">Years with Bank</p>
          <p class="text-sm font-medium text-slate-900">
            {{ financialInfo()!.bankingDetails.yearsWithBank }} years
          </p>
        </div>
      </div>
    </div>
    }
  </div>
  }

  <!-- FUNDING INFO TAB -->
  @if (activeTab() === 'funding' && fundingInfo()) {
  <div class="space-y-4">
    <div class="grid grid-cols-2 gap-4">
      @if (fundingInfo()!.amountRequired) {
      <div class="bg-orange-50 border border-orange-200/50 rounded-xl p-4">
        <div class="flex items-start gap-3">
          <lucide-icon
            [img]="DollarSignIcon"
            class="w-5 h-5 text-orange-600 mt-0.5"
          />
          <div class="flex-1 min-w-0">
            <p class="text-xs font-medium text-orange-700 mb-1">
              Amount Required
            </p>
            <p class="text-sm font-bold text-orange-900">
              {{ fundingInfo()!.amountRequired }}
            </p>
          </div>
        </div>
      </div>
      } @if (fundingInfo()!.timelineRequired) {
      <div class="bg-blue-50 border border-blue-200/50 rounded-xl p-4">
        <div class="flex items-start gap-3">
          <lucide-icon
            [img]="CalendarIcon"
            class="w-5 h-5 text-blue-600 mt-0.5"
          />
          <div class="flex-1 min-w-0">
            <p class="text-xs font-medium text-blue-700 mb-1">
              Timeline Required
            </p>
            <p class="text-sm font-semibold text-blue-900">
              {{ fundingInfo()!.timelineRequired }}
            </p>
          </div>
        </div>
      </div>
      } @if (fundingInfo()!.repaymentPeriod) {
      <div class="bg-slate-50 border border-slate-200 rounded-xl p-4">
        <div class="flex items-start gap-3">
          <lucide-icon
            [img]="CalendarIcon"
            class="w-5 h-5 text-slate-600 mt-0.5"
          />
          <div class="flex-1 min-w-0">
            <p class="text-xs font-medium text-slate-500 mb-1">
              Repayment Period
            </p>
            <p class="text-sm font-semibold text-slate-900">
              {{ fundingInfo()!.repaymentPeriod }}
            </p>
          </div>
        </div>
      </div>
      }

      <div class="bg-slate-50 border border-slate-200 rounded-xl p-4">
        <div class="flex items-start gap-3">
          <lucide-icon
            [img]="FileTextIcon"
            class="w-5 h-5 text-slate-600 mt-0.5"
          />
          <div class="flex-1 min-w-0">
            <p class="text-xs font-medium text-slate-500 mb-1">
              Collateral Available
            </p>
            <p class="text-sm font-semibold text-slate-900">
              {{ fundingInfo()!.collateralAvailable ? "Yes" : "No" }}
            </p>
          </div>
        </div>
      </div>
    </div>

    @if (fundingInfo()!.purposeOfFunding) {
    <div class="bg-slate-50 border border-slate-200 rounded-xl p-4">
      <h4 class="text-sm font-semibold text-slate-900 mb-2">
        Purpose of Funding
      </h4>
      <p class="text-sm text-slate-700 leading-relaxed">
        {{ fundingInfo()!.purposeOfFunding }}
      </p>
    </div>
    } @if (fundingInfo()!.collateralAvailable &&
    fundingInfo()!.collateralDescription) {
    <div class="bg-slate-50 border border-slate-200 rounded-xl p-4">
      <h4 class="text-sm font-semibold text-slate-900 mb-2">
        Collateral Description
      </h4>
      <p class="text-sm text-slate-700 leading-relaxed">
        {{ fundingInfo()!.collateralDescription }}
      </p>
    </div>
    }
  </div>
  }

  <!-- MANAGEMENT TAB -->
  @if (activeTab() === 'management') {
  <div class="space-y-6">
    @if (managementTeam().length > 0) {
    <div>
      <div class="flex items-center justify-between mb-4">
        <h4 class="text-sm font-semibold text-slate-900">Management Team</h4>
        <span
          class="text-xs font-medium text-slate-500 bg-slate-100 px-2.5 py-1 rounded-full"
        >
          {{ managementTeam().length }} members
        </span>
      </div>
      <div class="space-y-3">
        @for (member of managementTeam(); track $index) {
        <div
          class="bg-slate-50 border border-slate-200 rounded-xl p-4 hover:shadow-sm hover:border-slate-300 transition-all duration-200"
        >
          <div class="flex items-start justify-between">
            <div class="flex-1">
              <p class="text-sm font-semibold text-slate-900 mb-1">
                {{ member.fullName }}
              </p>
              <p class="text-xs text-slate-600 mb-2">{{ member.role }}</p>
              @if (member.qualification) {
              <p class="text-xs text-slate-500">{{ member.qualification }}</p>
              }
            </div>
            @if (member.yearsOfExperience) {
            <span
              class="bg-blue-50 text-blue-700 text-xs font-medium px-2.5 py-1 rounded-full border border-blue-200/50"
            >
              {{ member.yearsOfExperience }}y exp
            </span>
            }
          </div>
        </div>
        }
      </div>
    </div>
    } @if (boardOfDirectors().length > 0) {
    <div>
      <div class="flex items-center justify-between mb-4">
        <h4 class="text-sm font-semibold text-slate-900">Board of Directors</h4>
        <span
          class="text-xs font-medium text-slate-500 bg-slate-100 px-2.5 py-1 rounded-full"
        >
          {{ boardOfDirectors().length }} directors
        </span>
      </div>
      <div class="space-y-3">
        @for (member of boardOfDirectors(); track $index) {
        <div
          class="bg-slate-50 border border-slate-200 rounded-xl p-4 hover:shadow-sm hover:border-slate-300 transition-all duration-200"
        >
          <div class="flex items-start justify-between">
            <div class="flex-1">
              <p class="text-sm font-semibold text-slate-900 mb-1">
                {{ member.fullName }}
              </p>
              <p class="text-xs text-slate-600 mb-2">{{ member.role }}</p>
              @if (member.expertise) {
              <p class="text-xs text-slate-500">{{ member.expertise }}</p>
              }
            </div>
            @if (member.independent) {
            <span
              class="bg-green-50 text-green-700 text-xs font-medium px-2.5 py-1 rounded-full border border-green-200/50"
            >
              Independent
            </span>
            }
          </div>
        </div>
        }
      </div>
    </div>
    } @if (managementTeam().length === 0 && boardOfDirectors().length === 0) {
    <div class="text-center py-12">
      <lucide-icon
        [img]="UsersIcon"
        [size]="48"
        class="text-slate-300 mx-auto mb-4"
      />
      <p class="text-sm text-slate-600">No leadership information available</p>
    </div>
    }
  </div>
  }

  <!-- SWOT TAB -->
  @if (activeTab() === 'swot' && swotAnalysis()) {
  <div class="grid grid-cols-2 gap-4">
    <div class="bg-green-50 border border-green-200/50 rounded-xl p-4">
      <div class="flex items-center gap-2 mb-3">
        <div
          class="w-8 h-8 bg-green-100 rounded-lg flex items-center justify-center flex-shrink-0"
        >
          <lucide-icon
            [img]="TrendingUpIcon"
            [size]="16"
            class="text-green-600"
          />
        </div>
        <h4 class="text-sm font-semibold text-green-900">Strengths</h4>
        <span class="text-xs font-medium text-green-700 ml-auto">
          {{ swotAnalysis()!.strengths.length }}
        </span>
      </div>
      <ul class="space-y-2">
        @for (item of swotAnalysis()!.strengths; track $index) {
        <li
          class="text-xs text-green-800 leading-relaxed flex items-start gap-2"
        >
          <span class="text-green-600 mt-0.5">•</span>
          <span>{{ item }}</span>
        </li>
        }
      </ul>
    </div>

    <div class="bg-blue-50 border border-blue-200/50 rounded-xl p-4">
      <div class="flex items-center gap-2 mb-3">
        <div
          class="w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center flex-shrink-0"
        >
          <lucide-icon
            [img]="LightbulbIcon"
            [size]="16"
            class="text-blue-600"
          />
        </div>
        <h4 class="text-sm font-semibold text-blue-900">Opportunities</h4>
        <span class="text-xs font-medium text-blue-700 ml-auto">
          {{ swotAnalysis()!.opportunities.length }}
        </span>
      </div>
      <ul class="space-y-2">
        @for (item of swotAnalysis()!.opportunities; track $index) {
        <li
          class="text-xs text-blue-800 leading-relaxed flex items-start gap-2"
        >
          <span class="text-blue-600 mt-0.5">•</span>
          <span>{{ item }}</span>
        </li>
        }
      </ul>
    </div>

    <div class="bg-amber-50 border border-amber-200/50 rounded-xl p-4">
      <div class="flex items-center gap-2 mb-3">
        <div
          class="w-8 h-8 bg-amber-100 rounded-lg flex items-center justify-center flex-shrink-0"
        >
          <lucide-icon
            [img]="AlertCircleIcon"
            [size]="16"
            class="text-amber-600"
          />
        </div>
        <h4 class="text-sm font-semibold text-amber-900">Weaknesses</h4>
        <span class="text-xs font-medium text-amber-700 ml-auto">
          {{ swotAnalysis()!.weaknesses.length }}
        </span>
      </div>
      <ul class="space-y-2">
        @for (item of swotAnalysis()!.weaknesses; track $index) {
        <li
          class="text-xs text-amber-800 leading-relaxed flex items-start gap-2"
        >
          <span class="text-amber-600 mt-0.5">•</span>
          <span>{{ item }}</span>
        </li>
        }
      </ul>
    </div>

    <div class="bg-red-50 border border-red-200/50 rounded-xl p-4">
      <div class="flex items-center gap-2 mb-3">
        <div
          class="w-8 h-8 bg-red-100 rounded-lg flex items-center justify-center flex-shrink-0"
        >
          <lucide-icon
            [img]="AlertTriangleIcon"
            [size]="16"
            class="text-red-600"
          />
        </div>
        <h4 class="text-sm font-semibold text-red-900">Threats</h4>
        <span class="text-xs font-medium text-red-700 ml-auto">
          {{ swotAnalysis()!.threats.length }}
        </span>
      </div>
      <ul class="space-y-2">
        @for (item of swotAnalysis()!.threats; track $index) {
        <li class="text-xs text-red-800 leading-relaxed flex items-start gap-2">
          <span class="text-red-600 mt-0.5">•</span>
          <span>{{ item }}</span>
        </li>
        }
      </ul>
    </div>
  </div>
  }

  <!-- STRATEGY TAB -->
  @if (activeTab() === 'strategy') {
  <div class="space-y-4">
    @if (businessStrategy()) {
    <div class="bg-slate-50 border border-slate-200 rounded-xl p-4">
      <div class="flex items-center gap-2 mb-3">
        <lucide-icon [img]="TargetIcon" [size]="20" class="text-slate-600" />
        <h4 class="text-sm font-semibold text-slate-900">Business Strategy</h4>
      </div>
      <p class="text-sm text-slate-600">Strategic planning data available</p>
    </div>
    } @if (businessReview()) {
    <div class="bg-slate-50 border border-slate-200 rounded-xl p-4">
      <div class="flex items-center gap-2 mb-3">
        <lucide-icon [img]="FileTextIcon" [size]="20" class="text-slate-600" />
        <h4 class="text-sm font-semibold text-slate-900">Business Review</h4>
      </div>
      <p class="text-sm text-slate-600">
        Comprehensive business assessment on file
      </p>
    </div>
    } @if (!businessStrategy() && !businessReview()) {
    <div class="text-center py-12">
      <lucide-icon
        [img]="TargetIcon"
        [size]="48"
        class="text-slate-300 mx-auto mb-4"
      />
      <p class="text-sm text-slate-600">No strategic planning data available</p>
    </div>
    }
  </div>
  }
</div>
