<!-- src/app/funder/components/organization-onboarding.component.html -->
<!-- Remove the <app-organization-onboarding-layout> wrapper -->

<!-- Content based on current view -->
@switch (currentView()) {
  @case ('form') {
    <!-- Organization Info Form - will be routed separately -->
    <div class="text-center py-12">
      <div class="w-20 h-20 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-6">
        <lucide-icon [img]="Building2Icon" [size]="40" class="text-blue-600" />
      </div>
      
      <h2 class="text-2xl font-bold text-neutral-900 mb-4">Let's Set Up Your Organization</h2>
      <p class="text-neutral-600 mb-8 max-w-md mx-auto">
        We'll guide you through setting up your funding organization profile. This should take about 15 minutes.
      </p>

      <div class="space-y-4 max-w-sm mx-auto">
        <ui-button 
          variant="primary" 
          size="lg" 
          class="w-full"
          (clicked)="startSetup()"
        >
          <lucide-icon [img]="ArrowRightIcon" [size]="16" class="mr-2" />
          Start Setup
        </ui-button>
        
        <ui-button 
          variant="outline" 
          size="lg" 
          class="w-full"
          (clicked)="loadFromExisting()"
        >
          Load from Database
        </ui-button>
      </div>
    </div>
  }

  @case ('success') {
    <div class="text-center py-12">
      <div class="w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-6">
        <lucide-icon [img]="CheckCircleIcon" [size]="40" class="text-green-600" />
      </div>
      
      <h2 class="text-2xl font-bold text-neutral-900 mb-4">Organization Created Successfully!</h2>
      <p class="text-neutral-600 mb-8 max-w-md mx-auto">
        Your organization profile has been created. You can now start creating funding opportunities and connecting with SMEs.
      </p>

      <div class="space-y-4 max-w-sm mx-auto">
        <ui-button 
          variant="primary" 
          size="lg" 
          class="w-full"
          (clicked)="proceedToDashboard()"
        >
          <lucide-icon [img]="ArrowRightIcon" [size]="16" class="mr-2" />
          Go to Dashboard
        </ui-button>
        
        <ui-button 
          variant="outline" 
          size="lg" 
          class="w-full"
          (clicked)="editOrganization()"
        >
          <lucide-icon [img]="FileTextIcon" [size]="16" class="mr-2" />
          Edit Details
        </ui-button>
      </div>

      <!-- Next Steps Preview -->
      <div class="mt-12 p-6 bg-blue-50 rounded-lg max-w-md mx-auto">
        <h3 class="font-medium text-blue-900 mb-3">What's Next?</h3>
        <ul class="text-sm text-blue-800 space-y-2 text-left">
          <li class="flex items-center">
            <lucide-icon [img]="CheckCircleIcon" [size]="16" class="text-blue-600 mr-2 flex-shrink-0" />
            Complete legal compliance information
          </li>
          <li class="flex items-center">
            <lucide-icon [img]="CheckCircleIcon" [size]="16" class="text-blue-600 mr-2 flex-shrink-0" />
            Submit for verification
          </li>
          <li class="flex items-center">
            <lucide-icon [img]="CheckCircleIcon" [size]="16" class="text-blue-600 mr-2 flex-shrink-0" />
            Start creating funding opportunities
          </li>
        </ul>
      </div>
    </div>
  }

  @case ('verification') {
    <div class="text-center py-12">
      <div class="w-20 h-20 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-6">
        <lucide-icon [img]="ShieldIcon" [size]="40" class="text-blue-600" />
      </div>
      
      <h2 class="text-2xl font-bold text-neutral-900 mb-4">Get Verified</h2>
      <p class="text-neutral-600 mb-8 max-w-md mx-auto">
        To build trust with SMEs and access all platform features, we recommend getting your organization verified. This process typically takes 2-3 business days.
      </p>

      <!-- Verification Benefits -->
      <div class="bg-blue-50 border border-blue-200 rounded-lg p-6 mb-8 max-w-md mx-auto">
        <h3 class="font-medium text-blue-900 mb-3">Verification Benefits:</h3>
        <ul class="text-sm text-blue-800 space-y-2 text-left">
          <li class="flex items-center">
            <lucide-icon [img]="CheckCircleIcon" [size]="16" class="text-blue-600 mr-2 flex-shrink-0" />
            Enhanced credibility with SMEs
          </li>
          <li class="flex items-center">
            <lucide-icon [img]="CheckCircleIcon" [size]="16" class="text-blue-600 mr-2 flex-shrink-0" />
            Priority in funding opportunity listings
          </li>
          <li class="flex items-center">
            <lucide-icon [img]="CheckCircleIcon" [size]="16" class="text-blue-600 mr-2 flex-shrink-0" />
            Access to exclusive features
          </li>
          <li class="flex items-center">
            <lucide-icon [img]="CheckCircleIcon" [size]="16" class="text-blue-600 mr-2 flex-shrink-0" />
            Verified badge on your profile
          </li>
        </ul>
      </div>

      <div class="space-y-4 max-w-sm mx-auto">
        <ui-button 
          variant="primary" 
          size="lg" 
          class="w-full"
          (clicked)="requestVerification()"
          [disabled]="onboardingService.isSaving()"
        >
          @if (onboardingService.isSaving()) {
            <lucide-icon [img]="SparklesIcon" [size]="16" class="mr-2 animate-spin" />
            Submitting...
          } @else {
            <lucide-icon [img]="ShieldIcon" [size]="16" class="mr-2" />
            Request Verification
          }
        </ui-button>
        
        <ui-button 
          variant="outline" 
          size="lg" 
          class="w-full"
          (clicked)="skipVerification()"
        >
          Skip for Now
        </ui-button>
      </div>

      <!-- Info Box -->
      <div class="mt-8 p-4 bg-neutral-50 rounded-lg max-w-md mx-auto">
        <p class="text-sm text-neutral-600">
          <strong>Note:</strong> You can request verification at any time from your dashboard. We'll review your information and contact you within 2-3 business days.
        </p>
      </div>
    </div>
  }

  @case ('complete') {
    <div class="text-center py-12">
      <div class="w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-6">
        <lucide-icon [img]="SparklesIcon" [size]="40" class="text-green-600" />
      </div>
      
      <h2 class="text-2xl font-bold text-neutral-900 mb-4">Setup Complete!</h2>
      <p class="text-neutral-600 mb-8 max-w-md mx-auto">
        Congratulations! Your organization is fully set up and verified. You're ready to start funding opportunities.
      </p>

      <div class="space-y-4 max-w-sm mx-auto">
        <ui-button 
          variant="primary" 
          size="lg" 
          class="w-full"
          (clicked)="proceedToDashboard()"
        >
          <lucide-icon [img]="ArrowRightIcon" [size]="16" class="mr-2" />
          Go to Dashboard
        </ui-button>
        
        <ui-button 
          variant="outline" 
          size="lg" 
          class="w-full"
          (clicked)="createFirstOpportunity()"
        >
          Create First Opportunity
        </ui-button>
      </div>

      <!-- Achievement Summary -->
      <div class="mt-12 grid grid-cols-1 md:grid-cols-3 gap-4 max-w-2xl mx-auto">
        <div class="p-4 bg-green-50 rounded-lg">
          <div class="w-8 h-8 bg-green-500 rounded-full flex items-center justify-center mx-auto mb-2">
            <lucide-icon [img]="CheckCircleIcon" [size]="16" class="text-white" />
          </div>
          <h4 class="font-medium text-green-900 text-sm">Profile Complete</h4>
          <p class="text-xs text-green-700">Organization verified</p>
        </div>
        
        <div class="p-4 bg-blue-50 rounded-lg">
          <div class="w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center mx-auto mb-2">
            <lucide-icon [img]="ShieldIcon" [size]="16" class="text-white" />
          </div>
          <h4 class="font-medium text-blue-900 text-sm">Verified Status</h4>
          <p class="text-xs text-blue-700">Trusted by SMEs</p>
        </div>
        
        <div class="p-4 bg-purple-50 rounded-lg">
          <div class="w-8 h-8 bg-purple-500 rounded-full flex items-center justify-center mx-auto mb-2">
            <lucide-icon [img]="SparklesIcon" [size]="16" class="text-white" />
          </div>
          <h4 class="font-medium text-purple-900 text-sm">Ready to Fund</h4>
          <p class="text-xs text-purple-700">All systems go</p>
        </div>
      </div>
    </div>
  }
}

<!-- Error Display -->
@if (onboardingService.error()) {
  <div class="mt-6 p-4 bg-red-50 border border-red-200 rounded-lg">
    <div class="flex items-center">
      <lucide-icon [img]="AlertCircleIcon" [size]="20" class="text-red-600 mr-3" />
      <p class="text-red-800">{{ onboardingService.error() }}</p>
    </div>
  </div>
}