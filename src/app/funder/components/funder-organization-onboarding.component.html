    <div class="min-h-screen bg-neutral-50">
      <div class="max-w-4xl mx-auto px-4 py-8">
      

        <!-- Progress Steps -->
        @if (onboardingState()) {
          <div class="mb-8">
            <div class="flex items-center justify-center space-x-8">
              @for (step of onboardingService.getOnboardingSteps(); track step.id; let i = $index) {
                <div class="flex items-center">
                  <div [class]="getStepClasses(i)">
                    @if (step.completed) {
                      <lucide-icon [img]="CheckCircleIcon" [size]="20" />
                    } @else {
                      <span class="font-medium">{{ i + 1 }}</span>
                    }
                  </div>
                  <div class="ml-3 text-center">
                    <p [class]="getStepTextClasses(i)">{{ step.title }}</p>
                    <p class="text-xs text-neutral-500">{{ step.description }}</p>
                  </div>
                  @if (i < onboardingService.getOnboardingSteps().length - 1) {
                    <lucide-icon [img]="ArrowRightIcon" [size]="16" class="text-neutral-300 ml-8" />
                  }
                </div>
              }
            </div>
            
            <!-- Progress Bar -->
            <div class="mt-6 max-w-md mx-auto">
              <div class="w-full bg-neutral-200 rounded-full h-2">
                <div 
                  class="bg-primary-500 h-2 rounded-full transition-all duration-500"
                  [style.width.%]="onboardingState()!.completionPercentage"
                ></div>
              </div>
              <p class="text-center text-sm text-neutral-600 mt-2">
                {{ onboardingState()!.completionPercentage }}% Complete
              </p>
            </div>
          </div>
        }

        <!-- Main Content -->
        @switch (currentView()) {
          @case ('form') {
            <ui-card class="p-8">
              <div class="mb-6">
                <h2 class="text-xl font-semibold text-neutral-900 mb-2">Organization Information</h2>
                <p class="text-neutral-600">Tell us about your funding organization to get started</p>
              </div>

              <div class="space-y-8">
                <!-- Basic Information -->
                <div>
                  <h3 class="text-lg font-medium text-neutral-900 mb-4 flex items-center">
                    <lucide-icon [img]="Building2Icon" [size]="20" class="mr-2" />
                    Basic Information
                  </h3>
                  
                  <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div class="md:col-span-2">
                      <label class="block text-sm font-medium text-neutral-700 mb-1">
                        Organization Name <span class="text-red-500">*</span>
                      </label>
                      <input
                        type="text"
                        placeholder="e.g., South African Growth Fund"
                        [value]="formData().name"
                        (input)="updateField('name', $event)"
                        class="block w-full px-3 py-2 border border-neutral-300 rounded-md shadow-sm placeholder-neutral-400 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500"
                      />
                    </div>

                    <div class="md:col-span-2">
                      <label class="block text-sm font-medium text-neutral-700 mb-1">
                        Organization Type <span class="text-red-500">*</span>
                      </label>
                      <select
                        [value]="formData().organizationType"
                        (change)="updateField('organizationType', $event)"
                        class="block w-full px-3 py-2 border border-neutral-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500"
                      >
                        <option value="">Select organization type</option>
                        <option value="investment_fund">Investment Fund</option>
                        <option value="venture_capital">Venture Capital</option>
                        <option value="private_equity">Private Equity</option>
                        <option value="bank">Bank</option>
                        <option value="government">Government Agency</option>
                        <option value="ngo">NGO/Non-Profit</option>
                      </select>
                    </div>

                    <div class="md:col-span-2">
                      <label class="block text-sm font-medium text-neutral-700 mb-1">
                        Description <span class="text-red-500">*</span>
                      </label>
                      <textarea
                        rows="3"
                        placeholder="Describe your organization's mission and focus areas..."
                        [value]="formData().description"
                        (input)="updateField('description', $event)"
                        class="block w-full px-3 py-2 border border-neutral-300 rounded-md shadow-sm placeholder-neutral-400 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500"
                      ></textarea>
                    </div>
                  </div>
                </div>

                <!-- Legal Information -->
                <div>
                  <h3 class="text-lg font-medium text-neutral-900 mb-4 flex items-center">
                    <lucide-icon [img]="FileTextIcon" [size]="20" class="mr-2" />
                    Legal Information
                  </h3>
                  
                  <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div>
                      <label class="block text-sm font-medium text-neutral-700 mb-1">Legal Name</label>
                      <input
                        type="text"
                        placeholder="Official registered name"
                        [value]="formData().legalName"
                        (input)="updateField('legalName', $event)"
                        class="block w-full px-3 py-2 border border-neutral-300 rounded-md shadow-sm placeholder-neutral-400 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500"
                      />
                    </div>

                    <div>
                      <label class="block text-sm font-medium text-neutral-700 mb-1">Registration Number</label>
                      <input
                        type="text"
                        placeholder="Company registration number"
                        [value]="formData().registrationNumber"
                        (input)="updateField('registrationNumber', $event)"
                        class="block w-full px-3 py-2 border border-neutral-300 rounded-md shadow-sm placeholder-neutral-400 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500"
                      />
                    </div>

                    <div>
                      <label class="block text-sm font-medium text-neutral-700 mb-1">Tax Number</label>
                      <input
                        type="text"
                        placeholder="VAT/Tax identification number"
                        [value]="formData().taxNumber"
                        (input)="updateField('taxNumber', $event)"
                        class="block w-full px-3 py-2 border border-neutral-300 rounded-md shadow-sm placeholder-neutral-400 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500"
                      />
                    </div>

                    <div>
                      <label class="block text-sm font-medium text-neutral-700 mb-1">Founded Year</label>
                      <input
                        type="number"
                        placeholder="2020"
                        min="1900"
                        [max]="currentYear"
                        [value]="formData().foundedYear"
                        (input)="updateField('foundedYear', $event)"
                        class="block w-full px-3 py-2 border border-neutral-300 rounded-md shadow-sm placeholder-neutral-400 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500"
                      />
                    </div>
                  </div>
                </div>

                <!-- Contact Information -->
                <div>
                  <h3 class="text-lg font-medium text-neutral-900 mb-4 flex items-center">
                    <lucide-icon [img]="MailIcon" [size]="20" class="mr-2" />
                    Contact Information
                  </h3>
                  
                  <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div>
                      <label class="block text-sm font-medium text-neutral-700 mb-1">
                        Website
                      </label>
                      <input
                        type="url"
                        placeholder="https://yourfund.co.za"
                        [value]="formData().website"
                        (input)="updateField('website', $event)"
                        class="block w-full px-3 py-2 border border-neutral-300 rounded-md shadow-sm placeholder-neutral-400 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500"
                      />
                    </div>

                    <div>
                      <label class="block text-sm font-medium text-neutral-700 mb-1">
                        Email <span class="text-red-500">*</span>
                      </label>
                      <input
                        type="email"
                        placeholder="contact@yourfund.co.za"
                        [value]="formData().email"
                        (input)="updateField('email', $event)"
                        class="block w-full px-3 py-2 border border-neutral-300 rounded-md shadow-sm placeholder-neutral-400 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500"
                      />
                    </div>

                    <div class="md:col-span-2">
                      <label class="block text-sm font-medium text-neutral-700 mb-1">
                        Phone <span class="text-red-500">*</span>
                      </label>
                      <input
                        type="tel"
                        placeholder="+27 11 123 4567"
                        [value]="formData().phone"
                        (input)="updateField('phone', $event)"
                        class="block w-full px-3 py-2 border border-neutral-300 rounded-md shadow-sm placeholder-neutral-400 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500"
                      />
                    </div>
                  </div>
                </div>

                <!-- Address -->
                <div>
                  <h3 class="text-lg font-medium text-neutral-900 mb-4 flex items-center">
                    <lucide-icon [img]="MapPinIcon" [size]="20" class="mr-2" />
                    Address
                  </h3>
                  
                  <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div class="md:col-span-2">
                      <label class="block text-sm font-medium text-neutral-700 mb-1">
                        Address Line 1 <span class="text-red-500">*</span>
                      </label>
                      <input
                        type="text"
                        placeholder="123 Main Street"
                        [value]="formData().addressLine1"
                        (input)="updateField('addressLine1', $event)"
                        class="block w-full px-3 py-2 border border-neutral-300 rounded-md shadow-sm placeholder-neutral-400 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500"
                      />
                    </div>

                    <div class="md:col-span-2">
                      <label class="block text-sm font-medium text-neutral-700 mb-1">Address Line 2</label>
                      <input
                        type="text"
                        placeholder="Suite 456"
                        [value]="formData().addressLine2"
                        (input)="updateField('addressLine2', $event)"
                        class="block w-full px-3 py-2 border border-neutral-300 rounded-md shadow-sm placeholder-neutral-400 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500"
                      />
                    </div>

                    <div>
                      <label class="block text-sm font-medium text-neutral-700 mb-1">
                        City <span class="text-red-500">*</span>
                      </label>
                      <input
                        type="text"
                        placeholder="Cape Town"
                        [value]="formData().city"
                        (input)="updateField('city', $event)"
                        class="block w-full px-3 py-2 border border-neutral-300 rounded-md shadow-sm placeholder-neutral-400 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500"
                      />
                    </div>

                    <div>
                      <label class="block text-sm font-medium text-neutral-700 mb-1">
                        Province <span class="text-red-500">*</span>
                      </label>
                      <select
                        [value]="formData().province"
                        (change)="updateField('province', $event)"
                        class="block w-full px-3 py-2 border border-neutral-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500"
                      >
                        <option value="">Select province</option>
                        <option value="western_cape">Western Cape</option>
                        <option value="gauteng">Gauteng</option>
                        <option value="kwazulu_natal">KwaZulu-Natal</option>
                        <option value="eastern_cape">Eastern Cape</option>
                        <option value="free_state">Free State</option>
                        <option value="limpopo">Limpopo</option>
                        <option value="mpumalanga">Mpumalanga</option>
                        <option value="north_west">North West</option>
                        <option value="northern_cape">Northern Cape</option>
                      </select>
                    </div>

                    <div>
                      <label class="block text-sm font-medium text-neutral-700 mb-1">Postal Code</label>
                      <input
                        type="text"
                        placeholder="8001"
                        [value]="formData().postalCode"
                        (input)="updateField('postalCode', $event)"
                        class="block w-full px-3 py-2 border border-neutral-300 rounded-md shadow-sm placeholder-neutral-400 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500"
                      />
                    </div>

                    <div>
                      <label class="block text-sm font-medium text-neutral-700 mb-1">
                        Country <span class="text-red-500">*</span>
                      </label>
                      <select
                        [value]="formData().country"
                        (change)="updateField('country', $event)"
                        class="block w-full px-3 py-2 border border-neutral-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500"
                      >
                        <option value="South Africa">South Africa</option>
                        <option value="Botswana">Botswana</option>
                        <option value="Namibia">Namibia</option>
                        <option value="Zambia">Zambia</option>
                        <option value="Zimbabwe">Zimbabwe</option>
                      </select>
                    </div>
                  </div>
                </div>

                <!-- Organization Details -->
                <div>
                  <h3 class="text-lg font-medium text-neutral-900 mb-4 flex items-center">
                    <lucide-icon [img]="UsersIcon" [size]="20" class="mr-2" />
                    Organization Details
                  </h3>
                  
                  <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div>
                      <label class="block text-sm font-medium text-neutral-700 mb-1">Employee Count</label>
                      <select
                        [value]="formData().employeeCount"
                        (change)="updateField('employeeCount', $event)"
                        class="block w-full px-3 py-2 border border-neutral-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500"
                      >
                        <option value="">Select size</option>
                        <option value="1-10">1-10 employees</option>
                        <option value="11-50">11-50 employees</option>
                        <option value="51-200">51-200 employees</option>
                        <option value="201-500">201-500 employees</option>
                        <option value="500+">500+ employees</option>
                      </select>
                    </div>

                    <div>
                      <label class="block text-sm font-medium text-neutral-700 mb-1">Assets Under Management (ZAR)</label>
                      <input
                        type="number"
                        placeholder="100000000"
                        [value]="formData().assetsUnderManagement"
                        (input)="updateField('assetsUnderManagement', $event)"
                        class="block w-full px-3 py-2 border border-neutral-300 rounded-md shadow-sm placeholder-neutral-400 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500"
                      />
                    </div>
                  </div>
                </div>
              </div>

              <!-- Form Actions -->
              <div class="flex items-center justify-between pt-8 mt-8 border-t border-neutral-200">
                <div>
                  @if (isEditMode()) {
                    <ui-button variant="outline" (clicked)="cancelEdit()">
                      Cancel
                    </ui-button>
                  }
                </div>

                <div class="flex items-center space-x-4">
                  <ui-button 
                    variant="primary" 
                    (clicked)="saveOrganization()" 
                    [disabled]="onboardingService.isSaving() || !isFormValid()"
                  >
                    @if (onboardingService.isSaving()) {
                      Saving...
                    } @else {
                      {{ isEditMode() ? 'Update Organization' : 'Create Organization' }}
                    }
                  </ui-button>
                </div>
              </div>
            </ui-card>
          }

          @case ('success') {
            <ui-card class="p-8 text-center">
              <div class="w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-6">
                <lucide-icon [img]="CheckCircleIcon" [size]="40" class="text-green-600" />
              </div>
              
              <h2 class="text-2xl font-bold text-neutral-900 mb-4">Organization Created Successfully!</h2>
              <p class="text-neutral-600 mb-8">
                Your organization profile has been created. You can now start creating funding opportunities and connecting with SMEs.
              </p>

              <div class="flex items-center justify-center space-x-4">
                <ui-button variant="outline" (clicked)="editOrganization()">
                  <lucide-icon [img]="FileTextIcon" [size]="16" class="mr-2" />
                  Edit Details
                </ui-button>
                
                <ui-button variant="primary" (clicked)="proceedToDashboard()">
                  <lucide-icon [img]="ArrowRightIcon" [size]="16" class="mr-2" />
                  Go to Dashboard
                </ui-button>
              </div>
            </ui-card>
          }

          @case ('verification') {
            <ui-card class="p-8 text-center">
              <div class="w-20 h-20 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-6">
                <lucide-icon [img]="ShieldIcon" [size]="40" class="text-blue-600" />
              </div>
              
              <h2 class="text-2xl font-bold text-neutral-900 mb-4">Get Verified</h2>
              <p class="text-neutral-600 mb-8">
                To build trust with SMEs and access all platform features, we recommend getting your organization verified. This process typically takes 2-3 business days.
              </p>

              <div class="bg-blue-50 border border-blue-200 rounded-lg p-6 mb-8">
                <h3 class="font-medium text-blue-900 mb-3">Verification includes:</h3>
                <ul class="text-sm text-blue-800 space-y-2 text-left max-w-md mx-auto">
                  <li class="flex items-center">
                    <lucide-icon [img]="CheckCircleIcon" [size]="16" class="text-blue-600 mr-2 flex-shrink-0" />
                    Legal entity verification
                  </li>
                  <li class="flex items-center">
                    <lucide-icon [img]="CheckCircleIcon" [size]="16" class="text-blue-600 mr-2 flex-shrink-0" />
                    Financial credentials review
                  </li>
                  <li class="flex items-center">
                    <lucide-icon [img]="CheckCircleIcon" [size]="16" class="text-blue-600 mr-2 flex-shrink-0" />
                    Regulatory compliance check
                  </li>
                  <li class="flex items-center">
                    <lucide-icon [img]="CheckCircleIcon" [size]="16" class="text-blue-600 mr-2 flex-shrink-0" />
                    Enhanced profile visibility
                  </li>
                </ul>
              </div>

              <div class="flex items-center justify-center space-x-4">
                <ui-button variant="outline" (clicked)="skipVerification()">
                  Skip for Now
                </ui-button>
                
                <ui-button variant="primary" (clicked)="requestVerification()">
                  <lucide-icon [img]="ShieldIcon" [size]="16" class="mr-2" />
                  Request Verification
                </ui-button>
              </div>
            </ui-card>
          }
        }

        <!-- Error Display -->
        @if (onboardingService.error()) {
          <div class="mt-6 p-4 bg-red-50 border border-red-200 rounded-lg">
            <div class="flex items-center">
              <lucide-icon [img]="AlertCircleIcon" [size]="20" class="text-red-600 mr-3" />
              <p class="text-red-800">{{ onboardingService.error() }}</p>
            </div>
          </div>
        }
      </div>
    </div>